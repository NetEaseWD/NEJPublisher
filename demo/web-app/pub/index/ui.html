<meta charset="utf-8"/> <textarea name="jst" id="ui-jst-0"> ui content </textarea> <textarea name="js">(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_j=_("nej.j"),_t=_("nej.ut"),_cache={},_skey=+(new Date)+"-";_e._$parseTemplate=function(){var _count=0;var _doCheckReady=function(){if(_count>0)return;_count=0;_v._$dispatchEvent(document,"templateready");_v._$clearEvent(document,"templateready")};var _doParseSrc=function(_textarea,_options){var _src=_e._$dataset(_textarea,"src");if(!_src)return;_options=_options||_o;var _root=_options.root;if(!_root){_root=_textarea.ownerDocument.location.href}else{_root=_u._$absolute(_root)}_src=_src.split(",");_u._$forEach(_src,function(_value,_index,_list){_list[_index]=_u._$absolute(_value,_root)});return _src};var _doAddStyle=function(_textarea,_options){if(!_textarea)return;var _src=_doParseSrc(_textarea,_options);if(!!_src)_j._$queueStyle(_src,{version:_e._$dataset(_textarea,"version")});_e._$addStyle(_textarea.value)};var _onAddScript=function(_value){_count--;_e._$addScript(_value);_doCheckReady()};var _doAddScript=function(_textarea,_options){if(!_textarea)return;var _src=_doParseSrc(_textarea,_options),_val=_textarea.value;if(!!_src){_count++;var _options={version:_e._$dataset(_textarea,"version"),onloaded:_onAddScript._$bind(null,_val)};window.setTimeout(_j._$queueScript._$bind(_j,_src,_options),0);return}_e._$addScript(_val)};var _onAddHtml=function(_body){_count--;_e._$parseTemplate(_body);_doCheckReady()};var _doAddHtml=function(_textarea,_options){if(!_textarea)return;var _src=_doParseSrc(_textarea,_options)[0];if(!!_src){_count++;var _options={version:_e._$dataset(_textarea,"version"),onloaded:_onAddHtml};window.setTimeout(_j._$loadHtml._$bind(_j,_src,_options),0)}};var _onAddTextResource=function(_id,_text){_count--;_e._$addTextTemplate(_id,_text||"");_doCheckReady()};var _doAddTextResource=function(_textarea,_options){if(!_textarea||!_textarea.id)return;var _id=_textarea.id,_src=_doParseSrc(_textarea,_options)[0];if(!!_src){_count++;var _url=_src+(_src.indexOf("?")<0?"?":"&")+(_e._$dataset(_textarea,"version")||""),_options={type:"text",method:"GET",onload:_onAddTextResource._$bind(null,_id)};window.setTimeout(_j._$request._$bind(_j,_url,_options),0)}};var _doAddTemplate=function(_node,_options){var _type=_node.name.toLowerCase();switch(_type){case"jst":_e._$addHtmlTemplate(_node,!0);return;case"txt":_e._$addTextTemplate(_node.id,_node.value||"");return;case"ntp":_e._$addNodeTemplate(_node.value||"",_node.id);return;case"js":_doAddScript(_node,_options);return;case"css":_doAddStyle(_node,_options);return;case"html":_doAddHtml(_node,_options);return;case"res":_doAddTextResource(_node,_options);return}};_t._$$CustomEvent._$allocate({element:document,event:"templateready",oneventadd:_doCheckReady});return function(_element,_options){_element=_e._$get(_element);if(!!_element){var _list=_element.tagName=="TEXTAREA"?[_element]:_element.getElementsByTagName("textarea");_u._$forEach(_list,function(_node){_doAddTemplate(_node,_options)});_e._$remove(_element,!0)}_doCheckReady();return this}}();_e._$addTextTemplate=function(_key,_value){_cache[_key]=_value||"";return this};_e._$getTextTemplate=function(_key){return _cache[_key]||""};_e._$addNodeTemplate=function(_element,_key){_key=_key||_u._$randNumberString();_element=_e._$get(_element)||_element;_e._$addTextTemplate(_skey+_key,_element);_e._$removeByEC(_element);return _key};_e._$getNodeTemplate=function(_key){if(!_key)return null;_key=_skey+_key;var _value=_e._$getTextTemplate(_key);if(!_value)return null;if(_u._$isString(_value)){_value=_e._$html2node(_value);_e._$addTextTemplate(_key,_value)}return _value.cloneNode(!0)};_e._$getItemTemplate=function(){var _doFilter=function(_value,_key){return _key=="offset"||_key=="limit"};return function(_list,_item,_options){var _arr=[];if(!_list||!_list.length||!_item)return _arr;_options=_options||_o;var _len=_list.length,_beg=parseInt(_options.offset)||0,_end=Math.min(_len,_beg+(parseInt(_options.limit)||_len)),_opt={total:_list.length,range:[_beg,_end]};NEJ.X(_opt,_options,_doFilter);for(var i=_beg,_instance;i<_end;i++){_opt.index=i;_opt.data=_list[i];_instance=_item._$allocate(_opt);var _id=_instance._$getId();_cache[_id]=_instance;_instance._$recycle=_instance._$recycle._$aop(function(_id,_instance){delete _cache[_id];delete _instance._$recycle}._$bind(null,_id,_instance));_arr.push(_instance)}return _arr}}();_e._$getItemById=function(_id){return _cache[_id]};_e._$setup=function(_klass,_options){_options=_options||_o;_e._$parseTemplate(_options.tid||"template-box");_v._$addEvent(document,"templateready",function(){_klass._$allocate()._$dispatchEvent("onshow",_options)})};_("dbg").dumpTC=function(){return _cache}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_u=_("nej.u"),_t=_("nej.ut"),_p=_("nej.ui"),_pro;if(!!_p._$$Abstract)return;_p._$$Abstract=NEJ.C();_pro=_p._$$Abstract._$extend(_t._$$Event);_pro.__init=function(){this.__supInit();_e._$dumpCSSText();this.__initXGui();this.__initNode()};_pro.__reset=function(_options){this.__supReset(_options);this.__doInitClass(_options.clazz);this._$appendTo(_options.parent)};_pro.__destroy=function(){this.__supDestroy();this.__doDelParentClass();delete this.__parent;_e._$removeByEC(this.__body);_e._$delClassName(this.__body,this.__class);delete this.__class};_pro.__initXGui=_f;_pro.__initNode=function(){if(!this.__seed_html)this.__initNodeTemplate();this.__body=_e._$getNodeTemplate(this.__seed_html);if(!this.__body)this.__body=_e._$create("div",this.__seed_css);_e._$addClassName(this.__body,this.__seed_css)};_pro.__initNodeTemplate=_f;_pro.__doInitClass=function(_clazz){this.__class=_clazz||"";_e._$addClassName(this.__body,this.__class)};_pro.__doAddParentClass=function(){if(!this.__seed_css)return;_e._$addClassName(this.__parent,this.__seed_css+"-parent")};_pro.__doDelParentClass=function(){if(!this.__seed_css)return;_e._$delClassName(this.__parent,this.__seed_css+"-parent")};_pro._$getBody=function(){return this.__body};_pro._$appendTo=function(_parent){if(!this.__body)return this;this.__doDelParentClass();if(_u._$isFunction(_parent)){this.__parent=_parent(this.__body)}else{this.__parent=_e._$get(_parent);if(!!this.__parent)this.__parent.appendChild(this.__body)}this.__doAddParentClass();return this};_pro._$show=function(){if(!this.__parent||!this.__body||this.__body.parentNode==this.__parent)return this;this.__parent.appendChild(this.__body);return this};_pro._$hide=function(){_e._$removeByEC(this.__body);return this}})();
(function(){window.dispatcher._$loaded("/",null)})()</textarea>