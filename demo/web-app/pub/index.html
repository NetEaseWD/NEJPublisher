<!DOCTYPE html> <html  manifest="http://b3.bst.126.net/cache.manifest"> <head> <meta charset="utf-8"/> <title>模块调度机制 - 前端实例</title> <link href="//b0.bst.126.net/r/core.css?f60113d5f42327bc6e98898019f61f4b" type="text/css" rel="stylesheet"/><style type="text/css">#module-box{min-height:500px;_height:500px;}</style> </head> <body> <div class="g-doc"> <div class="g-hd"> <h1 class="m-logo">网易-杭研院-前端技术组-实例库</h1> <h2 class="m-title">模块调度机制</h2> </div> <div class="g-bd" id="module-box"></div> <div class="g-bd"> <div class="m-foot"> 如有任何问题，请联系：蔡剑飞(<a href="mailto:caijf@corp.netease.com">caijf@corp.netease.com</a>) </div> </div> <div class="g-ft"> <div class="m-foot"> &nbsp;&copy;&nbsp;网易-杭研院-前端技术组 </div> </div> </div> <div id="template-box" style="display:none;">  <textarea name="jst" id="ui-jst-0"> ui content </textarea> <textarea name="js">(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_j=_("nej.j"),_t=_("nej.ut"),_cache={},_skey=+(new Date)+"-";_e._$parseTemplate=function(){var _count=0;var _doCheckReady=function(){if(_count>0)return;_count=0;_v._$dispatchEvent(document,"templateready");_v._$clearEvent(document,"templateready")};var _doParseSrc=function(_textarea,_options){var _src=_e._$dataset(_textarea,"src");if(!_src)return;_options=_options||_o;var _root=_options.root;if(!_root){_root=_textarea.ownerDocument.location.href}else{_root=_u._$absolute(_root)}_src=_src.split(",");_u._$forEach(_src,function(_value,_index,_list){_list[_index]=_u._$absolute(_value,_root)});return _src};var _doAddStyle=function(_textarea,_options){if(!_textarea)return;var _src=_doParseSrc(_textarea,_options);if(!!_src)_j._$queueStyle(_src,{version:_e._$dataset(_textarea,"version")});_e._$addStyle(_textarea.value)};var _onAddScript=function(_value){_count--;_e._$addScript(_value);_doCheckReady()};var _doAddScript=function(_textarea,_options){if(!_textarea)return;var _src=_doParseSrc(_textarea,_options),_val=_textarea.value;if(!!_src){_count++;var _options={version:_e._$dataset(_textarea,"version"),onloaded:_onAddScript._$bind(null,_val)};window.setTimeout(_j._$queueScript._$bind(_j,_src,_options),0);return}_e._$addScript(_val)};var _onAddHtml=function(_body){_count--;_e._$parseTemplate(_body);_doCheckReady()};var _doAddHtml=function(_textarea,_options){if(!_textarea)return;var _src=_doParseSrc(_textarea,_options)[0];if(!!_src){_count++;var _options={version:_e._$dataset(_textarea,"version"),onloaded:_onAddHtml};window.setTimeout(_j._$loadHtml._$bind(_j,_src,_options),0)}};var _onAddTextResource=function(_id,_text){_count--;_e._$addTextTemplate(_id,_text||"");_doCheckReady()};var _doAddTextResource=function(_textarea,_options){if(!_textarea||!_textarea.id)return;var _id=_textarea.id,_src=_doParseSrc(_textarea,_options)[0];if(!!_src){_count++;var _url=_src+(_src.indexOf("?")<0?"?":"&")+(_e._$dataset(_textarea,"version")||""),_options={type:"text",method:"GET",onload:_onAddTextResource._$bind(null,_id)};window.setTimeout(_j._$request._$bind(_j,_url,_options),0)}};var _doAddTemplate=function(_node,_options){var _type=_node.name.toLowerCase();switch(_type){case"jst":_e._$addHtmlTemplate(_node,!0);return;case"txt":_e._$addTextTemplate(_node.id,_node.value||"");return;case"ntp":_e._$addNodeTemplate(_node.value||"",_node.id);return;case"js":_doAddScript(_node,_options);return;case"css":_doAddStyle(_node,_options);return;case"html":_doAddHtml(_node,_options);return;case"res":_doAddTextResource(_node,_options);return}};_t._$$CustomEvent._$allocate({element:document,event:"templateready",oneventadd:_doCheckReady});return function(_element,_options){_element=_e._$get(_element);if(!!_element){var _list=_element.tagName=="TEXTAREA"?[_element]:_element.getElementsByTagName("textarea");_u._$forEach(_list,function(_node){_doAddTemplate(_node,_options)});_e._$remove(_element,!0)}_doCheckReady();return this}}();_e._$addTextTemplate=function(_key,_value){_cache[_key]=_value||"";return this};_e._$getTextTemplate=function(_key){return _cache[_key]||""};_e._$addNodeTemplate=function(_element,_key){_key=_key||_u._$randNumberString();_element=_e._$get(_element)||_element;_e._$addTextTemplate(_skey+_key,_element);_e._$removeByEC(_element);return _key};_e._$getNodeTemplate=function(_key){if(!_key)return null;_key=_skey+_key;var _value=_e._$getTextTemplate(_key);if(!_value)return null;if(_u._$isString(_value)){_value=_e._$html2node(_value);_e._$addTextTemplate(_key,_value)}return _value.cloneNode(!0)};_e._$getItemTemplate=function(){var _doFilter=function(_value,_key){return _key=="offset"||_key=="limit"};return function(_list,_item,_options){var _arr=[];if(!_list||!_list.length||!_item)return _arr;_options=_options||_o;var _len=_list.length,_beg=parseInt(_options.offset)||0,_end=Math.min(_len,_beg+(parseInt(_options.limit)||_len)),_opt={total:_list.length,range:[_beg,_end]};NEJ.X(_opt,_options,_doFilter);for(var i=_beg,_instance;i<_end;i++){_opt.index=i;_opt.data=_list[i];_instance=_item._$allocate(_opt);var _id=_instance._$getId();_cache[_id]=_instance;_instance._$recycle=_instance._$recycle._$aop(function(_id,_instance){delete _cache[_id];delete _instance._$recycle}._$bind(null,_id,_instance));_arr.push(_instance)}return _arr}}();_e._$getItemById=function(_id){return _cache[_id]};_e._$setup=function(_klass,_options){_options=_options||_o;_e._$parseTemplate(_options.tid||"template-box");_v._$addEvent(document,"templateready",function(){_klass._$allocate()._$dispatchEvent("onshow",_options)})};_("dbg").dumpTC=function(){return _cache}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_u=_("nej.u"),_t=_("nej.ut"),_p=_("nej.ui"),_pro;if(!!_p._$$Abstract)return;_p._$$Abstract=NEJ.C();_pro=_p._$$Abstract._$extend(_t._$$Event);_pro.__init=function(){this.__supInit();_e._$dumpCSSText();this.__initXGui();this.__initNode()};_pro.__reset=function(_options){this.__supReset(_options);this.__doInitClass(_options.clazz);this._$appendTo(_options.parent)};_pro.__destroy=function(){this.__supDestroy();this.__doDelParentClass();delete this.__parent;_e._$removeByEC(this.__body);_e._$delClassName(this.__body,this.__class);delete this.__class};_pro.__initXGui=_f;_pro.__initNode=function(){if(!this.__seed_html)this.__initNodeTemplate();this.__body=_e._$getNodeTemplate(this.__seed_html);if(!this.__body)this.__body=_e._$create("div",this.__seed_css);_e._$addClassName(this.__body,this.__seed_css)};_pro.__initNodeTemplate=_f;_pro.__doInitClass=function(_clazz){this.__class=_clazz||"";_e._$addClassName(this.__body,this.__class)};_pro.__doAddParentClass=function(){if(!this.__seed_css)return;_e._$addClassName(this.__parent,this.__seed_css+"-parent")};_pro.__doDelParentClass=function(){if(!this.__seed_css)return;_e._$delClassName(this.__parent,this.__seed_css+"-parent")};_pro._$getBody=function(){return this.__body};_pro._$appendTo=function(_parent){if(!this.__body)return this;this.__doDelParentClass();if(_u._$isFunction(_parent)){this.__parent=_parent(this.__body)}else{this.__parent=_e._$get(_parent);if(!!this.__parent)this.__parent.appendChild(this.__body)}this.__doAddParentClass();return this};_pro._$show=function(){if(!this.__parent||!this.__body||this.__body.parentNode==this.__parent)return this;this.__parent.appendChild(this.__body);return this};_pro._$hide=function(){_e._$removeByEC(this.__body);return this}})();
(function(){window.dispatcher._$loaded("/",null)})()</textarea> <textarea name="jst" id="m-jst-0"> <div class="w-tab"> {list xlist as x} <a class="itm js-tag" href="#">${x.name}</a> {/list} </div> <div class="w-box"></div> </textarea> <textarea name="css">.w-tab{border-bottom:1px solid #000;overflow:hidden;text-align:center;font-size:16px;zoom:1;}.w-tab .itm{display:block;float:left;width:100px;height:30px;line-height:30px;margin-right:10px;color:#000;background:#aaa;}.w-tab .itm:hover{text-decoration:none;}.w-tab .js-selected{background:#000;color:#fff;}.w-box{padding:10px 0;}</textarea><textarea name="js">(function(){var _=NEJ.P,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_t=_("dm.ut"),_p=NEJ.P("dm.m"),_g=window,_proModuleM,_supModuleM;_p._$$ModuleM=NEJ.C();_proModuleM=_p._$$ModuleM._$extend(_t._$$Module,!0);_supModuleM=_p._$$ModuleM._$supro;_proModuleM.__doBuild=function(){this.__xlist=[{url:"/m/a/",name:"A",umi:"/m/a/a0/"},{url:"/m/b/",name:"B"},{url:"/m/c/",name:"C"},{url:"/m/d/",name:"D"}];this.__body=_e._$create("div");_e._$renderHtmlTemplate(this.__body,"m-jst-0",{xlist:this.__xlist});var _list=_e._$getChildren(this.__body);this.__export.box=_list[1];this.__tab=_e._$tab(_list[0],{clazz:"js-tag"});this.__tab._$setEvent("onchange",this.__onTabChange._$bind(this))};_proModuleM.__doSyncTab=function(_umi){var _index=_u._$indexOf(this.__xlist,function(_item){return _umi.indexOf(_item.url)>=0});if(_index<0)return;this.__tab._$go(_index);var _config=this.__xlist[0];if(_umi.indexOf(_config.url)>=0)_config.umi=_umi};_proModuleM.__onTabChange=function(_event){var _config=this.__xlist[_event.index];_g.dispatcher._$redirect(_config.umi||_config.url)};_proModuleM.__onShow=function(_event){this.__doSyncTab(_event.href);_supModuleM.__onShow.apply(this,arguments)};_proModuleM.__onRefresh=function(_event){this.__doSyncTab(_event.href)};_g.dispatcher._$loaded("/m",_p._$$ModuleM)})()</textarea> <textarea name="jst" id="a-jst-0"> <div class="w-tab2"> {list xlist as x} <a class="itm js-tag" href="#">${x.name}</a> {/list} </div> <div class="w-box2"></div> </textarea> <textarea name="css">.m-a .w-tab2{float:left;width:100px;margin-right:-100px;text-align:center;font-size:14px;}.m-a .w-tab2 .itm{display:block;height:30px;line-height:30px;margin-bottom:5px;color:#000;background:#ccc;}.m-a .w-tab2 .itm:hover{text-decoration:none;}.m-a .w-tab2 .js-selected{background:#888;color:#fff;font-weight:bold;}.m-a .w-box2{margin-left:100px;padding-left:10px;border-left:1px solid #888;}</textarea><textarea name="js">(function(){var _=NEJ.P,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_t=_("dm.ut"),_p=NEJ.P("dm.m"),_g=window,_proModuleA,_supModuleA;_p._$$ModuleA=NEJ.C();_proModuleA=_p._$$ModuleA._$extend(_t._$$Module,!0);_supModuleA=_p._$$ModuleA._$supro;_proModuleA.__doBuild=function(){this.__xlist=[{url:"/m/a/a0/",name:"A0"},{url:"/m/a/a1/",name:"A1"},{url:"/m/a/a2/",name:"A2"}];this.__body=_e._$create("div","m-a");_e._$renderHtmlTemplate(this.__body,"a-jst-0",{xlist:this.__xlist});var _list=_e._$getChildren(this.__body);this.__export.box=_list[1];this.__tab=_e._$tab(_list[0],{clazz:"js-tag"});this.__tab._$setEvent("onchange",this.__onTabChange._$bind(this))};_proModuleA.__doSyncTab=function(_umi){var _index=_u._$indexOf(this.__xlist,function(_item){return _item.url===_umi});if(_index<0)return;this.__tab._$go(_index)};_proModuleA.__onTabChange=function(_event){_g.dispatcher._$redirect(this.__xlist[_event.index].url)};_proModuleA.__onShow=function(_event){this.__doSyncTab(_event.href);_supModuleA.__onShow.apply(this,arguments)};_proModuleA.__onRefresh=function(_event){this.__doSyncTab(_event.href)};_g.dispatcher._$loaded("/m/a",_p._$$ModuleA)})()</textarea>  </div> <script type="text/javascript">location.config = {"ver":{"index/a.a0.html":"7d92b6aa7725ad0122af9101f1ae3f76","index/a.a1.html":"61233be3655b64f84c3de25ed19c768f","index/a.a2.html":"e18da0200b96072833ce0cbb2cb8677d","index/a.html":"973fb07e3f01cdff1533471faa1ecaa9","index/b.b0.html":"44df98bb4cd593a8c01a860ecf5cc588","index/b.b1.html":"1ee21c5001afdf2e3ead9c6905226705","index/b.b2.html":"9329a4eb03eed48c92dd6f7cb620ca7b","index/b.html":"aa4363503a934d5a7cfbd76b0d583954","index/c.html":"d8184cf314b3b4edad180293869f496a","index/d.d0.html":"75ef65d1e944b17338be8d575126915c","index/d.d1.html":"038e080bcedb3b6fc9666854105553fb","index/d.d2.html":"347ee9c431b679887527cdd3a8ec33c0","index/d.html":"1ee0bc398145fb33c2dfbad5efb0125e","index/m.html":"84c916ef1344440bd5ee4ba11b9eb24e","index/ui.html":"d904204ceed15b5fa976673f8b8e3f4c","simple.html":"b40112f6e8e47fc9fcb543952b5be8c0","test/a.html":"7b52dd9dcc114f4d9f9a581a454368a9","test/b.html":"7b52dd9dcc114f4d9f9a581a454368a9"},"root":"/pub/"};</script> <div style="display:none;" id="umi://index/a.a0.html"><meta charset="utf-8"/> <textarea name="ntp" id="a0-ntp-0"> <div class="m-a0"> <input type="button" value="send message to C"/> <p>0000000000000000000000</p> <p>0000000000000000000000</p> <p>0000000000000000000000</p> <p>0000000000000000000000</p> <p>0000000000000000000000</p> <p>0000000000000000000000</p> <p>0000000000000000000000</p> </div> </textarea> <textarea name="css">.m-a0{min-height:500px;_height:500px;background:#f00;}.m-a0 input{padding:5px 10px;margin:10px 0;}</textarea><textarea name="js">console.log("aaaaaaaaaxxxxxx");
(function(){var x="xxxxxxxxxxx"})();
(function(){var _=NEJ.P,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_t=_("dm.ut"),_p=NEJ.P("dm.m"),_g=window,_proModuleA0,_supModuleA0;_p._$$ModuleA0=NEJ.C();_proModuleA0=_p._$$ModuleA0._$extend(_t._$$Module,!0);_supModuleA0=_p._$$ModuleA0._$supro;_proModuleA0.__doBuild=function(){this.__body=_e._$getNodeTemplate("a0-ntp-0");_v._$addEvent(this.__body.getElementsByTagName("input")[0],"click",this.__doSendMessage._$bind(this))};_proModuleA0.__doSendMessage=function(){_g.dispatcher._$message({to:"/m/c/",from:this.__umi,data:"hello C! my name is a0."})};_g.dispatcher._$loaded("/m/a/a0/",_p._$$ModuleA0)})()</textarea></div><div style="display:none;" id="umi://index/a.a1.html"><meta charset="utf-8"/> <textarea name="ntp" id="a1-ntp-0"> <div class="m-a1"> <input type="button" value="send message to C"/> <input type="button" value="send message to A0"/> <p>1111111111111111111111111111</p> <p>1111111111111111111111111111</p> <p>1111111111111111111111111111</p> <p>1111111111111111111111111111</p> <p>1111111111111111111111111111</p> <p>1111111111111111111111111111</p> <p>1111111111111111111111111111</p> </div> </textarea> <textarea name="css">.m-a1{min-height:500px;_height:500px;background:#fdc;}.m-a1 input{padding:5px 10px;margin:10px 0;}</textarea><textarea name="js">(function(){var _=NEJ.P,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_t=_("dm.ut"),_p=NEJ.P("dm.m"),_g=window,_proModuleA1,_supModuleA1;_p._$$ModuleA1=NEJ.C();_proModuleA1=_p._$$ModuleA1._$extend(_t._$$Module,!0);_supModuleA1=_p._$$ModuleA1._$supro;_proModuleA1.__doBuild=function(){this.__body=_e._$getNodeTemplate("a1-ntp-0");var _list=this.__body.getElementsByTagName("input");_v._$addEvent(_list[0],"click",this.__doSendMessage._$bind(this,"/m/c/"));_v._$addEvent(_list[1],"click",this.__doSendMessage._$bind(this,"/m/a/a0/"))};_proModuleA1.__doSendMessage=function(_to){_g.dispatcher._$message({to:_to,from:this.__umi,data:"hello C! my name is a1."})};_g.dispatcher._$loaded("/m/a/a1/",_p._$$ModuleA1)})()</textarea></div><div style="display:none;" id="umi://index/a.a2.html"><meta charset="utf-8"/> <textarea name="ntp" id="a2-ntp-0"> <div class="m-a2"> <input type="button" value="send message to C"/> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> </div> </textarea> <textarea name="css">.m-a2{min-height:500px;_height:500px;background:#aaa;}.m-a2 input{padding:5px 10px;margin:10px 0;}</textarea><textarea name="js">(function(){var _=NEJ.P,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_t=_("dm.ut"),_p=NEJ.P("dm.m"),_g=window,_proModuleA2,_supModuleA2;_p._$$ModuleA2=NEJ.C();_proModuleA2=_p._$$ModuleA2._$extend(_t._$$Module,!0);_supModuleA2=_p._$$ModuleA2._$supro;_proModuleA2.__doBuild=function(){this.__body=_e._$getNodeTemplate("a2-ntp-0");_v._$addEvent(this.__body.getElementsByTagName("input")[0],"click",this.__doSendMessage._$bind(this))};_proModuleA2.__doSendMessage=function(){_g.dispatcher._$message({to:"/m/c/",from:this.__umi,data:"hello C! my name is a2."})};_g.dispatcher._$loaded("/m/a/a2/",_p._$$ModuleA2)})()</textarea></div><script src="//b0.bst.126.net/r/core.js?a30ffee79b1c313afee4ad96387a8b8d" type="text/javascript"></script><script type="text/javascript">(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_j=_("nej.j"),_t=_("nej.ut"),_cache={},_skey=+(new Date)+"-";_e._$parseTemplate=function(){var _count=0;var _doCheckReady=function(){if(_count>0)return;_count=0;_v._$dispatchEvent(document,"templateready");_v._$clearEvent(document,"templateready")};var _doParseSrc=function(_textarea,_options){var _src=_e._$dataset(_textarea,"src");if(!_src)return;_options=_options||_o;var _root=_options.root;if(!_root){_root=_textarea.ownerDocument.location.href}else{_root=_u._$absolute(_root)}_src=_src.split(",");_u._$forEach(_src,function(_value,_index,_list){_list[_index]=_u._$absolute(_value,_root)});return _src};var _doAddStyle=function(_textarea,_options){if(!_textarea)return;var _src=_doParseSrc(_textarea,_options);if(!!_src)_j._$queueStyle(_src,{version:_e._$dataset(_textarea,"version")});_e._$addStyle(_textarea.value)};var _onAddScript=function(_value){_count--;_e._$addScript(_value);_doCheckReady()};var _doAddScript=function(_textarea,_options){if(!_textarea)return;var _src=_doParseSrc(_textarea,_options),_val=_textarea.value;if(!!_src){_count++;var _options={version:_e._$dataset(_textarea,"version"),onloaded:_onAddScript._$bind(null,_val)};window.setTimeout(_j._$queueScript._$bind(_j,_src,_options),0);return}_e._$addScript(_val)};var _onAddHtml=function(_body){_count--;_e._$parseTemplate(_body);_doCheckReady()};var _doAddHtml=function(_textarea,_options){if(!_textarea)return;var _src=_doParseSrc(_textarea,_options)[0];if(!!_src){_count++;var _options={version:_e._$dataset(_textarea,"version"),onloaded:_onAddHtml};window.setTimeout(_j._$loadHtml._$bind(_j,_src,_options),0)}};var _onAddTextResource=function(_id,_text){_count--;_e._$addTextTemplate(_id,_text||"");_doCheckReady()};var _doAddTextResource=function(_textarea,_options){if(!_textarea||!_textarea.id)return;var _id=_textarea.id,_src=_doParseSrc(_textarea,_options)[0];if(!!_src){_count++;var _url=_src+(_src.indexOf("?")<0?"?":"&")+(_e._$dataset(_textarea,"version")||""),_options={type:"text",method:"GET",onload:_onAddTextResource._$bind(null,_id)};window.setTimeout(_j._$request._$bind(_j,_url,_options),0)}};var _doAddTemplate=function(_node,_options){var _type=_node.name.toLowerCase();switch(_type){case"jst":_e._$addHtmlTemplate(_node,!0);return;case"txt":_e._$addTextTemplate(_node.id,_node.value||"");return;case"ntp":_e._$addNodeTemplate(_node.value||"",_node.id);return;case"js":_doAddScript(_node,_options);return;case"css":_doAddStyle(_node,_options);return;case"html":_doAddHtml(_node,_options);return;case"res":_doAddTextResource(_node,_options);return}};_t._$$CustomEvent._$allocate({element:document,event:"templateready",oneventadd:_doCheckReady});return function(_element,_options){_element=_e._$get(_element);if(!!_element){var _list=_element.tagName=="TEXTAREA"?[_element]:_element.getElementsByTagName("textarea");_u._$forEach(_list,function(_node){_doAddTemplate(_node,_options)});_e._$remove(_element,!0)}_doCheckReady();return this}}();_e._$addTextTemplate=function(_key,_value){_cache[_key]=_value||"";return this};_e._$getTextTemplate=function(_key){return _cache[_key]||""};_e._$addNodeTemplate=function(_element,_key){_key=_key||_u._$randNumberString();_element=_e._$get(_element)||_element;_e._$addTextTemplate(_skey+_key,_element);_e._$removeByEC(_element);return _key};_e._$getNodeTemplate=function(_key){if(!_key)return null;_key=_skey+_key;var _value=_e._$getTextTemplate(_key);if(!_value)return null;if(_u._$isString(_value)){_value=_e._$html2node(_value);_e._$addTextTemplate(_key,_value)}return _value.cloneNode(!0)};_e._$getItemTemplate=function(){var _doFilter=function(_value,_key){return _key=="offset"||_key=="limit"};return function(_list,_item,_options){var _arr=[];if(!_list||!_list.length||!_item)return _arr;_options=_options||_o;var _len=_list.length,_beg=parseInt(_options.offset)||0,_end=Math.min(_len,_beg+(parseInt(_options.limit)||_len)),_opt={total:_list.length,range:[_beg,_end]};NEJ.X(_opt,_options,_doFilter);for(var i=_beg,_instance;i<_end;i++){_opt.index=i;_opt.data=_list[i];_instance=_item._$allocate(_opt);var _id=_instance._$getId();_cache[_id]=_instance;_instance._$recycle=_instance._$recycle._$aop(function(_id,_instance){delete _cache[_id];delete _instance._$recycle}._$bind(null,_id,_instance));_arr.push(_instance)}return _arr}}();_e._$getItemById=function(_id){return _cache[_id]};_e._$setup=function(_klass,_options){_options=_options||_o;_e._$parseTemplate(_options.tid||"template-box");_v._$addEvent(document,"templateready",function(){_klass._$allocate()._$dispatchEvent("onshow",_options)})};_("dbg").dumpTC=function(){return _cache}})();
(function(){var _=NEJ.P,_o=NEJ.O,_u=_("nej.u"),_t=_("nej.ut"),_p=_("nej.ut.p"),_proNode;if(!!_p._$$Node)return;_p._$$Node=NEJ.C();_proNode=_p._$$Node._$extend(_t._$$Event);_proNode.__init=function(){this.__supInit();this.__children=[]};_proNode.__reset=function(_options){this.__supReset(_options);this._$setParent(_options.parent);this.__name=_options.name||"/";this.__data=_options.data||{}};_proNode.__destroy=function(){var _doRecycle=function(_node,_index,_list){_list.splice(_index,1);_node._$recycle()};return function(){this.__supDestroy();delete this.__data;_u._$reverseEach(this.__children,_doRecycle);this._$setParent(null)}}();_proNode.__isNode=function(_node){return _node instanceof _p._$$Node};_proNode.__hasChild=function(_child){return _u._$indexOf(this.__children,_child)>=0};_proNode._$getName=function(){return this.__name};_proNode._$getData=function(){return this.__data};_proNode._$getPath=function(){var _parent=this._$getParent(),_name=this._$getName();if(!_parent)return _name;var _pname=_parent._$getName();if(_pname!="/"&&_name!="/")_name="/"+_name;return _parent._$getPath()+_name};_proNode._$getParent=function(){return this.__parent};_proNode._$getChildren=function(){return this.__children};_proNode._$getChildByName=function(_name){var _index=_u._$indexOf(this.__children,function(_node){return _name==_node._$getName()});return this.__children[_index]||null};_proNode._$setParent=function(_parent){_parent=this.__isNode(_parent)?_parent:null;if(_parent==this.__parent)return;!!_parent?_parent._$appendChild(this):this.__parent._$removeChild(this);this.__parent=_parent;return this};_proNode._$appendChild=function(_child){_child=this.__isNode(_child)?_child:null;if(!_child||this.__hasChild(_child))return;this.__children.push(_child);_child._$setParent(this);return this};_proNode._$removeChild=function(_child){_child=this.__isNode(_child)?_child:null;var _index=_u._$indexOf(this.__children,_child);if(_index>=0){this.__children.splice(_index,1);_child._$setParent(null)}return _child}})();
(function(){var _=NEJ.P,_f=NEJ.F,_u=_("nej.u"),_t=_("nej.ut"),_p=_("nej.ut.p");var _doParseUMI=function(_root,_umi,_hanlder){var _node=_root,_hanlder=_hanlder||_f;if(_umi!="/"){_u._$forEach(_umi.split("/"),function(_name){var _result=_hanlder(_node,_name);if(!_result)return!0;_node=_result})}return _node};_p._$getNodeByUMI=function(){var _doSearch=function(_parent,_name){var _name=_name||"/",_pname=_parent._$getName();if(_pname=="/"&&_name=="/")return _parent;return _parent._$getChildByName(_name)};return function(_root,_umi){return _doParseUMI(_root,_umi,_doSearch)}}();_p._$appendNodeByUMI=function(){var _doBuild=function(_parent,_name){var _pname=_parent._$getName();if(!_name&&_pname=="/")return _parent;var _node=null;if(_pname!="/"){_node=_parent._$getChildByName("/");if(!_node){_node=_p._$$Node._$allocate();_parent._$appendChild(_node)}}if(!!_name){_node=_parent._$getChildByName(_name);if(!_node){_node=_p._$$Node._$allocate({name:_name});_parent._$appendChild(_node)}}return _node};return function(_root,_umi){return _doParseUMI(_root,_umi,_doBuild)}}();_p._$getCommonRoot=function(_root,_source,_target){if(!_source||!_target)return _root;var _source=_source._$getPath().split("/"),_target=_target._$getPath().split("/"),_difidx=_u._$forIn(_source,function(_value,_index){if(_value!=_target[_index])return!0})||1,_umi=_source.splice(0,_difidx).join("/")||"/";return _p._$getNodeByUMI(_root,_umi)};_p._$breadthFirstSearch=function(_root,_handler){var _arr=[_root],_node=_arr.shift(),_handler=_handler||_f;while(!!_node){_arr.push.apply(_arr,_node._$getChildren());_handler(_node);_node=_arr.shift()}return this};_p._$isNode=function(_node){return _node instanceof _p._$$Node};_p._$isModule=function(_module){return _module instanceof _t._$$Module};_p._$isUMIPrivate=function(){var _reg=/^\/?\?(?=\/|$)/;return function(_umi){return _reg.test(_umi||"")}}();_p._$path2umi=function(){var _reg=/[\?#]/;return function(_url){var _arr=(_url||"").trim().split(_reg),_prv=_arr[0]=="/"&&(_arr[1]||"").indexOf("/")==0;return _arr[0]+(_prv?"?"+_arr[1]:"")}}()})();
(function(){var _=NEJ.P,_o=NEJ.O,_g=_("nej.g"),_e=_("nej.e"),_j=_("nej.j"),_u=_("nej.u"),_t=_("nej.ut"),_p=_("nej.ut.p"),_proGroupManager;if(!!_p._$$GroupManager)return;_p._$$GroupManager=NEJ.C();_proGroupManager=_p._$$GroupManager._$extend(_t._$$Event);_proGroupManager.__reset=function(_options){this.__supReset(_options);this.__root=_options.root;this.__dispatcher=_options.dispatcher;this.__mpool={}};_proGroupManager.__destroy=function(){this.__supDestroy();delete this.__root;delete this.__mpool};_proGroupManager.__isStopped=function(_node){if(!_p._$isNode(_node))return!1;return!!_node._$getData().stopped||this.__isStopped(_node._$getParent())};_proGroupManager.__doClearStopped=function(_node){if(!_p._$isNode(_node))return;delete _node._$getData().stopped;this.__doClearStopped(_node._$getParent())};_proGroupManager.__doModuleHide=function(_from,_to){this.__doModuleCheck("onhide",_from,_to)};_proGroupManager.__doModuleShow=function(_from,_to){this.__doModuleCheck("onshow",_from,_to);this.__doModuleAction(_from)};_proGroupManager.__doModuleRefresh=function(_node){this.__doModuleCheck("onrefresh",_node);this.__doModuleAction(_node)};_proGroupManager.__doModuleCheck=function(_type,_from,_to){if(_from==_to||!_p._$isNode(_from))return;if(_type=="onhide")this.__doModuleDispatch(_from,_type);this.__doModuleCheck(_type,_from._$getParent(),_to);if(_type!="onhide")this.__doModuleDispatch(_from,_type)};_proGroupManager.__doModuleAction=function(_node){if(!_p._$isNode(_node))return!0;var _data=_node._$getData(),_action=_data.action,_module=_data.module;if(!this.__doModuleAction(_node._$getParent())||!!_action&&_u._$isString(_module))return!1;if(!!_module&&!!_module._$allocate&&!!_action&&_action!="onhide"){if(this.__isStopped(_node))return;var _options={umi:_node._$getPath(),composite:_data.composite,dispatcher:this.__dispatcher};_module=_module._$allocate(_options);if(_p._$isModule(_module)){_data.module=_module;this.__doModuleDispatch(_node,"onshow")}else{delete _data.module}}delete _data.action;return!0};_proGroupManager.__doModuleDispatch=function(){var _getParentExport=function(_node){var _module;_node=_node._$getParent();while(!!_node){_module=_node._$getData().module;if(_p._$isModule(_module)){return _module._$getExportData()}_node=_node._$getParent()}return null};return function(_node,_name){if(!_p._$isNode(_node))return;var _data=_node._$getData(),_module=_data.module,_nothide=_name!="onhide";if(_p._$isModule(_module)){if(_nothide&&this.__isStopped(_node))return;var _event=!this.__source?_data.event:this.__source._$getData().event;if(!!_event){_event.umi=_node._$getPath();_event.data=_getParentExport(_node)}var _xname=_data.xname||"onhide";if(_name=="onshow"&&_xname!="onhide")_name="onrefresh";if(_name=="onrefresh"&&_xname=="onhide")_name="onshow";_data.xname=_name;_module._$dispatchEvent(_name,_event||{});if(_nothide&&!!_event&&!!_event.pos&&_event.umi==_event.target){_e._$scrollTo(_event.pos)}if(_nothide&&!!_event){_data.stopped=_event.stopped;delete _event.stopped}}else if(!!_module){_data.action=_name;if(_name=="onshow"&&_u._$isString(_module)){var _element=_e._$get("umi://"+_module);if(!!_element){_e._$parseTemplate(_element)}else{var _config=location.config||_o;_j._$loadHtml((_config.root||"")+_module,{version:(_config.ver||_o)[_module],onloaded:_e._$parseTemplate})}}}}}();_proGroupManager._$hasUMI=function(_umi){return!!this.__mpool[_umi]};_proGroupManager._$addUMI=function(_umi){this.__mpool[_umi]=!0;return this};_proGroupManager._$delUMI=function(_umi){delete this.__mpool[_umi];return this};_proGroupManager._$loadedUMI=function(_umi){if(this._$hasUMI(_umi))this.__doModuleAction(_p._$getNodeByUMI(this.__root,_umi));return this};_proGroupManager._$dispatchUMI=function(_umi){if(this._$hasUMI(_umi)){var _node=_p._$getNodeByUMI(this.__root,_umi);this.__doClearStopped(_node);this.__doModuleShow(_node)}return this};_proGroupManager._$hideUMI=function(_umi){if(this._$hasUMI(_umi)){this.__doModuleHide(_p._$getNodeByUMI(this.__root,_umi))}return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_p=_("nej.ut.p"),_proSingleGroupManager;if(!!_p._$$SingleGroupManager)return;_p._$$SingleGroupManager=NEJ.C();_proSingleGroupManager=_p._$$SingleGroupManager._$extend(_p._$$GroupManager);_proSingleGroupManager.__reset=function(_options){this.__supReset(_options);this.__classed=!!_options.classed};_proSingleGroupManager.__destroy=function(){this.__supDestroy();delete this.__cmroot;delete this.__source};_proSingleGroupManager._$exitable=function(_event){if(!this.__source)return!0;var _module=this.__source._$getData().module;if(_p._$isModule(_module))_module._$dispatchEvent("onbeforehide",_event);return!_event.stopped};_proSingleGroupManager._$refresh=function(){if(!this.__source)return;window.setTimeout(this._$dispatchUMI._$bind(this,this.__source._$getPath()),0)};_proSingleGroupManager._$dispatchUMI=function(_umi){if(!this._$hasUMI(_umi))return this;var _target=_p._$getNodeByUMI(this.__root,_umi),_data=_target._$getData();if(!_data.module)return this;var _source=this.__source,_event=_data.event,_odata=_o;this.__source=_target;this.__doClearStopped(_target);if(!!_source){_odata=_source._$getData().event;_event.referer=_odata.href||""}if(_source==_target){this.__doModuleRefresh(this.__source);return this}this.__cmroot=_p._$getCommonRoot(this.__root,_source,_target);if(_source!=null){if(_source!=this.__cmroot){if(this.__classed)_e._$delClassName(document.body,_odata.clazz);this.__doModuleHide(_source,this.__cmroot)}this.__doModuleRefresh(this.__cmroot)}else{this.__doModuleShow(this.__cmroot)}if(_target!=this.__cmroot){if(this.__classed)_e._$addClassName(document.body,_event.clazz);this.__doModuleShow(_target,this.__cmroot)}return this};_proSingleGroupManager._$loadedUMI=function(_umi){if(this._$hasUMI(_umi))this.__doModuleAction(this.__source);return this};_proSingleGroupManager._$hideUMI=_f})();
(function(){var _=NEJ.P,_v=_("nej.v"),_u=_("nej.u"),_b=_("nej.p"),_h=_("nej.h"),_t=_("nej.ut"),_reg1=/^[#?]+/,_reg2=/#(.*?)$/,_ctxt=window,_hack=!history.pushState||_b._$IS.android||!history.auto;var _setLocation=function(_url,_replaced){_ctxt.history[!_replaced?"pushState":"replaceState"](null,document.title,_url)};var _getLocation=function(){return location.parse(_ctxt.location.href)};_setLocation=_setLocation._$aop(function(_event){if(!_hack)return;var _args=_event.args;_event.stopped=!0;_url=_args[0].replace(_reg1,"");!_args[1]?_ctxt.location.hash=_url:_ctxt.location.replace("#"+_url)});_getLocation=_getLocation._$aop(function(_event){if(!_hack)return;_event.stopped=!0;var _hash=_reg2.test(_ctxt.location.href)?RegExp.$1:"";_event.value=location.parse(_hash.replace(_reg1,""))});location.redirect=function(_url,_replaced){_setLocation(_url,_replaced);return this};location.active=function(){var _timer,_url,_location,_locked,_done;var _onLocationChange=function(_href){if(!!_locked){_locked=!1;return}var _event={oldValue:_location,newValue:_getLocation()};if(!!location.ignored){location.ignored=!1}else{_v._$dispatchEvent(location,"beforeurlchange",_event);if(_event.stopped){if(!!_location){_locked=!0;_setLocation(_location.href,!0)}return}}_url=_ctxt.location.href;_location=_event.newValue;_v._$dispatchEvent(location,"urlchange",_location);_h.__pushHistory(_location.href)};var _doCheckLocation=function(){if(_url!=_ctxt.location.href)_onLocationChange();_timer=requestAnimationFrame(_doCheckLocation)};return function(_context){if(!!_done)return this;_done=!0;_ctxt=_context||window;if(_hack&&"onhashchange"in window&&_b._$NOT_PATCH.trident2){_v._$addEvent(_ctxt,"hashchange",_onLocationChange);_onLocationChange()}else if(!_timer){_timer=requestAnimationFrame(_doCheckLocation)}return this}}();location.parse=function(){var _reg0=/^https?:\/\/.*?\//i,_reg1=/[?#]/;return function(_url){var _result={href:_url};_url=(_url||"").replace(_reg0,"/").split(_reg1);var _count=1;if(_url[0]=="/"&&(_url[1]||"").indexOf("/")==0)_count=2;_result.path=_url.splice(0,_count).join("?");_result.query=_u._$query2object(_url.join("&"));return _result}}();location.same=function(_url){return _getLocation().href==_url};_t._$$CustomEvent._$allocate({element:location,event:["beforeurlchange","urlchange"]})})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_p=_("nej.ut"),_d=_("nej.ut.p"),_pro;if(!!_p._$$Dispatcher)return;_p._$$Dispatcher=NEJ.C();_pro=_p._$$Dispatcher._$extend(_p._$$Event);_pro.__init=function(){this.__supInit();var _seed=+(new Date);this.__pbseed="pb-"+_seed;this.__pvseed="pv-"+_seed};_pro.__reset=function(_options){this.__dtmp={};this.__rest=!!_options.rest;this.__root=_d._$$Node._$allocate();this.__config={m:{},mg:{},r:[],rr:{},al:{},am:{}};this.__groups={};this.__doBuildGroup(this.__pbseed);this.__groups[this.__pvseed]=_d._$$GroupManager._$allocate({root:this.__root,dispatcher:this});this.__doInitDomEvent([[location,"urlchange",this.__onURLChange._$bind(this)]]);this.__supReset(_options);this._$rule(_options.rules);this._$regist(_options.modules)};_pro.__destroy=function(){var _doRecycle=function(_group,_key,_map){delete _map[_key];_group._$recycle()};return function(){delete this.__config;this.__root=this.__root._$recycle();_u._$forIn(this.__groups,_doRecycle);this.__supDestroy()}}();_pro.__setModuleConf=function(_umi,_key,_value){var _mconf=this.__config.m[_umi];if(!_mconf){_mconf={};this.__config.m[_umi]=_mconf}_mconf[_key]=_value};_pro.__getModuleConf=function(_umi,_key){var _mconf=this.__config.m[_umi];return!_mconf?"":_mconf[_key]};_pro.__doBuildGroup=function(_gid){if(!_gid)return;var _group=this.__groups[_gid];if(!_group){_group=_d._$$SingleGroupManager._$allocate({root:this.__root,dispatcher:this,classed:_gid==this.__pbseed});this.__groups[_gid]=_group}return _group};_pro.__doAddUMI2Group=function(_umi,_gid){var _group=this.__doBuildGroup(_gid);if(!_group){_gid=_d._$isUMIPrivate(_umi)?this.__pvseed:this.__pbseed;_group=this.__groups[_gid]}_group._$addUMI(_umi);this.__config.mg[_umi]=_gid};_pro.__doRewriteUMI=function(){var _reg=/\$\d/;return function(_umi,_href){var _result;_u._$forIn(this.__config.r,function(_config){_u._$forIn(_config,function(_value,_key){if(!!_value.test&&(_value.test(_umi)||_value.test(_href))){_result=_reg.test(_key)?_umi.replace(_value,_key):_key;return!0}if(_value===_umi||_value===_href){_result=_key;return!0}});return!!_result});return _result||_umi}}();_pro.__onURLChange=function(){var _trim=/(?:^\/+)|(?:\/+$)/gi,_reg0=/#(\$.*?)$/;var _doParseRestParam=function(_umi,_node){var _path=_node._$getPath(),_umi=_umi.replace(_path,"").replace(_trim,"");return _umi.split("/")};var _doTryGroupId=function(_umi,_map){var _value,_arr=_umi.split("/");while(_arr.length>0){if(!_arr[_arr.length-1]){_arr.pop()}else{_arr[_arr.length-1]=""}_value=_map[_arr.join("/")];if(!!_value)return _value}return""};return function(_location){if(_location.path.indexOf("$")==0)return;var _input=this.__dtmp[_location.path];delete this.__dtmp[_location.path];this._$dispatchEvent("onbeforechange",_location);var _umi=this.__doRewriteUMI(_location.path,_location.href),_gid=this.__config.mg[_umi];if(!_gid&&this.__rest)_gid=_doTryGroupId(_umi,this.__config.mg);if(!_gid&&!_d._$isUMIPrivate(_umi)){_umi=this.__config.rr["404"];_gid=this.__config.mg[_umi]}if(!_gid&&this.__rest)_gid=_doTryGroupId(_umi,this.__config.mg);if(!_gid)return;var _node=_d._$getNodeByUMI(this.__root,_umi),_prst=null;if(this.__rest)_prst=_doParseRestParam(_umi,_node);var _source=_umi;_umi=_node._$getPath();_node._$getData().event={target:_umi,source:_source,href:_location.href,param:_location.query,input:_input,prest:_prst,clazz:this.__getModuleConf(_umi,"clazz"),pos:_reg0.test(_location.href)?RegExp.$1:""};var _title=this.__getModuleConf(_source,"title");if(!!_title)document.title=_title;this.__groups[_gid]._$dispatchUMI(_umi)}}();_pro.__onClickDelegate=function(){var _doCheckUMI=function(_url,_href){if(!_url)return;var _info=location.parse(_url);this._$dispatchEvent("onbeforechange",_info);var _umi=this.__doRewriteUMI(_info.path,_href||_info.href);return this.__groups[this.__pbseed]._$hasUMI(_umi)};var _doParseUMI=function(_node){var _umi=_e._$dataset(_node,"href");if(!!_umi)return _umi;var _href=_e._$attr(_node,"href");if(!!_href&&!_e._$dataset(_node,"notUmi")){var _arr=_href.split("#");_arr.shift();var _umi=_arr.join("#");if(_doCheckUMI.call(this,_umi,_href)){return _umi}if(_doCheckUMI.call(this,_href)){var _info=location.parse(_href);return _info.path+"?"+_u._$object2query(_info.query)}}};var _isNode=function(_node){return!!_doParseUMI.call(this,_node)};return function(_event){var _element=_v._$getElement(_event,_isNode._$bind(this));if(!!_element){_v._$stopDefault(_event);this._$redirect(_doParseUMI.call(this,_element))}}}();_pro.__onActionDelegate=function(_event){var _am=this.__config.am,_conf=_am[_event.type];if(!_conf)return;var _element=_v._$getElement(_event,"d:resAction");if(!_element)return;var _action=_e._$dataset(_element,"resAction"),_handler=_conf[_action];if(!_handler)return;var _options={action:_action,target:_element,id:_e._$dataset(_element,"resId"),type:_e._$dataset(_element,"resType"),extra:_e._$dataset(_element,"resExtra")};this._$dispatchEvent("onbeforeaction",{event:_event,target:_element,result:_options});_handler.call(this,_options)};_pro._$rule=function(){var _buildin=["404"];var _doRegistRule=function(_config,_key){this._$rule(_key,_config)};var _doRegistTitle=function(_title,_umi){this.__setModuleConf(_umi,"title",_title)};var _doRegistAlias=function(_umi,_alias){this.__config.al[_alias]=_umi};var _doRegistRewrite=function(_config){if(!_config)return;this.__config.r.push(_config);_u._$forEach(_buildin,function(_key){if(!_config[_key])return;this.__config.rr[_key]=_config[_key];delete _config[_key]},this)};var _doRegistAction=function(_action,_name){var _am=this.__config.am;var _event="click",_handler=_action,_name=(_name||"").toLowerCase();if(_u._$isObject(_action)){_event=_action.event||_event;_handler=_action.value}if(_u._$isString(_handler)){_handler=function(_umi,_options){this._$redirect(_umi,{force:!0,input:_options})}._$bind(this,_handler)}else if(_u._$isFunction(_handler)){_handler=_handler._$aop(null,function(_event){var _result=_event.value;if(_u._$isString(_result)){this._$redirect(_result,{force:!0,input:_event.args[0]})}}._$bind(this))}if(_u._$isFunction(_handler)){if(!_am[_event]){this.__doInitDomEvent([[document,_event,this.__onActionDelegate._$bind(this)]]);_am[_event]={}}_am[_event][_name]=_handler}};var _fmap={title:function(_config){_u._$forIn(_config,_doRegistTitle,this)},rewrite:function(_config){if(!_u._$isArray(_config)){_doRegistRewrite.call(this,_config)}else{_u._$forEach(_config,_doRegistRewrite,this)}},alias:function(_config){_u._$forIn(_config,_doRegistAlias,this)},action:function(_config){_u._$forIn(_config,_doRegistAction,this)}};return function(_key,_config){if(_u._$isArray(_key)){_config=_key;_key="rewrite"}else if(!_u._$isString(_key)){_u._$forIn(_key,_doRegistRule,this);return this}(_fmap[_key]||_f).call(this,_config);return this}}();_pro._$regist=function(){var _doRegistUMI=function(_config,_umi){this._$regist(_umi,_config)};var _isModuleClass=function(_module){return!!_module&&!!_module._$extend};return function(_umi,_config){if(!_u._$isString(_umi)){_u._$forIn(_umi,_doRegistUMI,this);return this}var _data=_d._$appendNodeByUMI(this.__root,_umi)._$getData(),_module=_data.module;if(_d._$isModule(_module)||_isModuleClass(_module))return this;var _gid=this.__config.mg[_umi],_module;if(_u._$isString(_config)||_isModuleClass(_config)){_module=_config}else{_config=_config||_o;_gid=_config.gid;_module=_config.module;if(!!_config.title)this.__setModuleConf(_umi,"title",_config.title);if(!!_config.clazz)this.__setModuleConf(_umi,"clazz",_config.clazz);if(!!_config.composite)_data.composite=_config.composite}this.__doAddUMI2Group(_umi,_gid);_data.module=_module;return this}}();_pro._$message=function(){var _doSendMessage=function(_node,_message){var _module=_node._$getData().module;if(_d._$isModule(_module))_module._$dispatchEvent("onmessage",_message)};var _fmap=[_doSendMessage,function(_target,_message){var _from=_message.from;while(!!_target){if(_target._$getPath()!=_from)_doSendMessage(_target,_message);_target=_target._$getParent()}},function(_target,_message){var _from=_message.from;_d._$breadthFirstSearch(_target,function(_node){if(_node._$getPath()!=_from)_doSendMessage(_node,_message)})}];return function(_message){var _event=NEJ.X({},_message),_target=_d._$getNodeByUMI(this.__root,_event.to);_event.path=_target._$getPath();(_fmap[_event.mode]||_fmap[0]).call(this,_target,_event)}}();_pro._$publish=function(_type,_message){var _message=NEJ.X({},_message);_message.type=_type||"";this._$dispatchEvent((_message.from||"")+":"+_message.type,_message)};_pro._$subscribe=function(_umi,_type,_callback){_umi=this.__config.al[_umi]||_umi;this._$pushEvent((_umi||"")+":"+(_type||""),_callback)};_pro._$unsubscribe=function(_umi,_type,_callback){_umi=this.__config.al[_umi]||_umi;this._$delEvent((_umi||"")+":"+(_type||""),_callback)};_pro._$apply=function(_url){return this._$redirect(_url)};_pro._$hide=function(_umi){var _gid=this.__config.mg[_umi];if(_gid==this.__pvseed){this.__groups[_gid]._$hideUMI(_umi)}return this};_pro._$redirect=function(_url,_options){_options=_options||_o;var _umi=_d._$path2umi(_url),_location=location.parse(_url);this.__dtmp[_location.path]=_options.input;if(_d._$isUMIPrivate(_umi)){this.__onURLChange(_location)}else{var _group=this.__groups[this.__pbseed],_event={target:_location,umi:_umi};if(!!_group._$exitable(_event)){if(location.same(_url)&&!!_options.force){this.__onURLChange(_location)}else{location.ignored=!!_options.ignored;location.redirect(_url,!!_options.replace)}}}return this};_pro._$refresh=function(_url){if(!!_url){this._$redirect(_url,{replace:!0,force:!0})}else{this.__groups[this.__pbseed]._$refresh()}};_pro._$delegate=function(){this.__doInitDomEvent([[document,"click",this.__onClickDelegate._$bind(this)]]);return this};_pro._$active=function(){location.active();return this};_pro._$loaded=function(_umi,_module){_umi=this.__config.al[_umi]||_umi;if(!_u._$isArray(_umi)){this._$regist(_umi,_module);this.__groups[this.__config.mg[_umi]]._$loadedUMI(_umi)}else{_u._$forEach(_umi,function(_key){this._$loaded(_key,_module)},this)}return this};_e._$startup=function(_options){window.dispatcher=_p._$$Dispatcher._$getInstance(_options);_e._$dumpModules();_e._$parseTemplate((_options||_o).tid||"template-box",location.config);_v._$addEvent(document,"templateready",function(){window.setTimeout(dispatcher._$active._$bind(dispatcher),0)});return window.dispatcher}})();
(function(){var _=NEJ.P,_e=_("nej.e"),_t=_("nej.ut");window.dispatcher=_t._$$Dispatcher._$getInstance({rules:{rewrite:{404:"/m/a/a0/","/m/a/a0/":"/"},title:{"/m/b/":"Module B","/m/c/":"Module C"}},modules:{"/":"index/ui.html","/m":"index/m.html","/m/a":"index/a.html","/m/b/":"index/b.html","/m/c/":"index/c.html","/m/d/":"index/d.html","/m/a/a0/":{module:"index/a.a0.html",title:"Module A-A0",clazz:"g-aa0"},"/m/a/a1/":{module:"index/a.a1.html",title:"Module A-A1",clazz:"g-aa1"},"/m/a/a2/":{module:"index/a.a2.html",title:"Module A-A2",clazz:"g-aa2"},"/?/b/b0/":"index/b.b0.html","/?/b/b1/":"index/b.b1.html","/?/b/b2/":"index/b.b2.html","/?/d/d0/":{module:"index/d.d0.html",title:"Module D-D0",gid:"d"},"/?/d/d1/":{module:"index/d.d1.html",title:"Module D-D1",gid:"d"},"/?/d/d2/":{module:"index/d.d2.html",title:"Module D-D2",gid:"d"}}});_e._$parseTemplate("template-box");dispatcher._$active()})()</script> </body> </html>