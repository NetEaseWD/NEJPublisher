<!DOCTYPE html> <html manifest="http://b3.bst.126.net/cache.manifest"> <head> <meta charset="utf-8"/> <title>模块调度机制 - 前端实例</title> <link href="../r/core.css?f60113d5f42327bc6e98898019f61f4b" type="text/css" rel="stylesheet"/><style type="text/css">#module-box{min-height:500px;_height:500px;}</style> </head> <body> <div class="g-doc"> <div class="g-hd"> <h1 class="m-logo">网易-杭研院-前端技术组-实例库</h1> <h2 class="m-title">模块调度机制</h2> </div> <div class="g-bd" id="module-box"></div> <div class="g-bd"> <div class="m-foot"> 如有任何问题，请联系：蔡剑飞(<a href="mailto:caijf@corp.netease.com">caijf@corp.netease.com</a>) </div> </div> <div class="g-ft"> <div class="m-foot"> &nbsp;&copy;&nbsp;网易-杭研院-前端技术组 </div> </div> </div> <div id="template-box" style="display:none;">  <textarea name="jst" id="ui-jst-0"> ui content </textarea> <textarea name="js">(function(){var V=NEJ.P,bB=NEJ.O,U=V("nej.e"),bh=V("nej.v"),Z=V("nej.u"),bO=V("nej.j"),bA=V("nej.ut"),be={},hQ=+(new Date)+"-";U._$parseTemplate=function(){var cP=0;var eO=function(){if(cP>0)return;cP=0;bh._$dispatchEvent(document,"templateready");bh._$clearEvent(document,"templateready")};var fB=function(bD,Y){var ch=U._$dataset(bD,"src");if(!ch)return;Y=Y||bB;var bQ=Y.root;if(!bQ){bQ=bD.ownerDocument.location.href}else{bQ=Z._$absolute(bQ)}ch=ch.split(",");Z._$forEach(ch,function(bm,by,bd){bd[by]=Z._$absolute(bm,bQ)});return ch};var kj=function(bD,Y){if(!bD)return;var ch=fB(bD,Y);if(!!ch)bO._$queueStyle(ch,{version:U._$dataset(bD,"version")});U._$addStyle(bD.value)};var kk=function(bm){cP--;U._$addScript(bm);eO()};var kl=function(bD,Y){if(!bD)return;var ch=fB(bD,Y),dC=bD.value;if(!!ch){cP++;var Y={version:U._$dataset(bD,"version"),onloaded:kk._$bind(null,dC)};window.setTimeout(bO._$queueScript._$bind(bO,ch,Y),0);return}U._$addScript(dC)};var km=function(de){cP--;U._$parseTemplate(de);eO()};var kn=function(bD,Y){if(!bD)return;var ch=fB(bD,Y)[0];if(!!ch){cP++;var Y={version:U._$dataset(bD,"version"),onloaded:km};window.setTimeout(bO._$loadHtml._$bind(bO,ch,Y),0)}};var ko=function(bc,ck){cP--;U._$addTextTemplate(bc,ck||"");eO()};var kp=function(bD,Y){if(!bD||!bD.id)return;var bc=bD.id,ch=fB(bD,Y)[0];if(!!ch){cP++;var bp=ch+(ch.indexOf("?")<0?"?":"&")+(U._$dataset(bD,"version")||""),Y={type:"text",method:"GET",onload:ko._$bind(null,bc)};window.setTimeout(bO._$request._$bind(bO,bp,Y),0)}};var kq=function(bg,Y){var bj=bg.name.toLowerCase();switch(bj){case"jst":U._$addHtmlTemplate(bg,!0);return;case"txt":U._$addTextTemplate(bg.id,bg.value||"");return;case"ntp":U._$addNodeTemplate(bg.value||"",bg.id);return;case"js":kl(bg,Y);return;case"css":kj(bg,Y);return;case"html":kn(bg,Y);return;case"res":kp(bg,Y);return}};bA._$$CustomEvent._$allocate({element:document,event:"templateready",oneventadd:eO});return function(T,Y){T=U._$get(T);if(!!T){var bd=T.tagName=="TEXTAREA"?[T]:T.getElementsByTagName("textarea");Z._$forEach(bd,function(bg){kq(bg,Y)});U._$remove(T,!0)}eO();return this}}();U._$addTextTemplate=function(bi,bm){be[bi]=bm||"";return this};U._$getTextTemplate=function(bi){return be[bi]||""};U._$addNodeTemplate=function(T,bi){bi=bi||Z._$randNumberString();T=U._$get(T)||T;U._$addTextTemplate(hQ+bi,T);U._$removeByEC(T);return bi};U._$getNodeTemplate=function(bi){if(!bi)return null;bi=hQ+bi;var bm=U._$getTextTemplate(bi);if(!bm)return null;if(Z._$isString(bm)){bm=U._$html2node(bm);U._$addTextTemplate(bi,bm)}return bm.cloneNode(!0)};U._$getItemTemplate=function(){var dx=function(bm,bi){return bi=="offset"||bi=="limit"};return function(bd,bY,Y){var bw=[];if(!bd||!bd.length||!bY)return bw;Y=Y||bB;var hU=bd.length,fY=parseInt(Y.offset)||0,dE=Math.min(hU,fY+(parseInt(Y.limit)||hU)),eU={total:bd.length,range:[fY,dE]};NEJ.X(eU,Y,dx);for(var i=fY,bJ;i<dE;i++){eU.index=i;eU.data=bd[i];bJ=bY._$allocate(eU);var bc=bJ._$getId();be[bc]=bJ;bJ._$recycle=bJ._$recycle._$aop(function(bc,bJ){delete be[bc];delete bJ._$recycle}._$bind(null,bc,bJ));bw.push(bJ)}return bw}}();U._$getItemById=function(bc){return be[bc]};U._$setup=function(cR,Y){Y=Y||bB;U._$parseTemplate(Y.tid||"template-box");bh._$addEvent(document,"templateready",function(){cR._$allocate()._$dispatchEvent("onshow",Y)})};V("dbg").dumpTC=function(){return be}})();
(function(){var V=NEJ.P,bB=NEJ.O,bG=NEJ.F,U=V("nej.e"),Z=V("nej.u"),bA=V("nej.ut"),W=V("nej.ui"),bn;if(!!W._$$Abstract)return;W._$$Abstract=NEJ.C();bn=W._$$Abstract._$extend(bA._$$Event);bn.__init=function(){this.__supInit();U._$dumpCSSText();this.__initXGui();this.__initNode()};bn.__reset=function(Y){this.__supReset(Y);this.__doInitClass(Y.clazz);this._$appendTo(Y.parent)};bn.__destroy=function(){this.__supDestroy();this.__doDelParentClass();delete this.__parent;U._$removeByEC(this.__body);U._$delClassName(this.__body,this.__class);delete this.__class};bn.__initXGui=bG;bn.__initNode=function(){if(!this.__seed_html)this.__initNodeTemplate();this.__body=U._$getNodeTemplate(this.__seed_html);if(!this.__body)this.__body=U._$create("div",this.__seed_css);U._$addClassName(this.__body,this.__seed_css)};bn.__initNodeTemplate=bG;bn.__doInitClass=function(bz){this.__class=bz||"";U._$addClassName(this.__body,this.__class)};bn.__doAddParentClass=function(){if(!this.__seed_css)return;U._$addClassName(this.__parent,this.__seed_css+"-parent")};bn.__doDelParentClass=function(){if(!this.__seed_css)return;U._$delClassName(this.__parent,this.__seed_css+"-parent")};bn._$getBody=function(){return this.__body};bn._$appendTo=function(bx){if(!this.__body)return this;this.__doDelParentClass();if(Z._$isFunction(bx)){this.__parent=bx(this.__body)}else{this.__parent=U._$get(bx);if(!!this.__parent)this.__parent.appendChild(this.__body)}this.__doAddParentClass();return this};bn._$show=function(){if(!this.__parent||!this.__body||this.__body.parentNode==this.__parent)return this;this.__parent.appendChild(this.__body);return this};bn._$hide=function(){U._$removeByEC(this.__body);return this}})();
(function(){window.dispatcher._$loaded("/",null)})()</textarea> <textarea name="jst" id="m-jst-0"> <div class="w-tab"> {list xlist as x} <a class="itm js-tag" href="#">${x.name}</a> {/list} </div> <div class="w-box"></div> </textarea> <textarea name="css">.w-tab{border-bottom:1px solid #000;overflow:hidden;text-align:center;font-size:16px;zoom:1;}.w-tab .itm{display:block;float:left;width:100px;height:30px;line-height:30px;margin-right:10px;color:#000;background:#aaa;}.w-tab .itm:hover{text-decoration:none;}.w-tab .js-selected{background:#000;color:#fff;}.w-box{padding:10px 0;}</textarea><textarea name="js">(function(){var V=NEJ.P,U=V("nej.e"),bh=V("nej.v"),Z=V("nej.u"),bA=V("dm.ut"),W=NEJ.P("dm.m"),bv=window,dT,hP;W._$$ModuleM=NEJ.C();dT=W._$$ModuleM._$extend(bA._$$Module,!0);hP=W._$$ModuleM._$supro;dT.__doBuild=function(){this.__xlist=[{url:"/m/a/",name:"A",umi:"/m/a/a0/"},{url:"/m/b/",name:"B"},{url:"/m/c/",name:"C"},{url:"/m/d/",name:"D"}];this.__body=U._$create("div");U._$renderHtmlTemplate(this.__body,"m-jst-0",{xlist:this.__xlist});var bd=U._$getChildren(this.__body);this.__export.box=bd[1];this.__tab=U._$tab(bd[0],{clazz:"js-tag"});this.__tab._$setEvent("onchange",this.__onTabChange._$bind(this))};dT.__doSyncTab=function(bl){var by=Z._$indexOf(this.__xlist,function(bY){return bl.indexOf(bY.url)>=0});if(by<0)return;this.__tab._$go(by);var bs=this.__xlist[0];if(bl.indexOf(bs.url)>=0)bs.umi=bl};dT.__onTabChange=function(S){var bs=this.__xlist[S.index];bv.dispatcher._$redirect(bs.umi||bs.url)};dT.__onShow=function(S){this.__doSyncTab(S.href);hP.__onShow.apply(this,arguments)};dT.__onRefresh=function(S){this.__doSyncTab(S.href)};bv.dispatcher._$loaded("/m",W._$$ModuleM)})()</textarea> <textarea name="jst" id="a-jst-0"> <div class="w-tab2"> {list xlist as x} <a class="itm js-tag" href="#">${x.name}</a> {/list} </div> <div class="w-box2"></div> </textarea> <textarea name="css">.m-a .w-tab2{float:left;width:100px;margin-right:-100px;text-align:center;font-size:14px;}.m-a .w-tab2 .itm{display:block;height:30px;line-height:30px;margin-bottom:5px;color:#000;background:#ccc;}.m-a .w-tab2 .itm:hover{text-decoration:none;}.m-a .w-tab2 .js-selected{background:#888;color:#fff;font-weight:bold;}.m-a .w-box2{margin-left:100px;padding-left:10px;border-left:1px solid #888;}</textarea><textarea name="js">(function(){var V=NEJ.P,U=V("nej.e"),bh=V("nej.v"),Z=V("nej.u"),bA=V("dm.ut"),W=NEJ.P("dm.m"),bv=window,ed,hE;W._$$ModuleA=NEJ.C();ed=W._$$ModuleA._$extend(bA._$$Module,!0);hE=W._$$ModuleA._$supro;ed.__doBuild=function(){this.__xlist=[{url:"/m/a/a0/",name:"A0"},{url:"/m/a/a1/",name:"A1"},{url:"/m/a/a2/",name:"A2"}];this.__body=U._$create("div","m-a");U._$renderHtmlTemplate(this.__body,"a-jst-0",{xlist:this.__xlist});var bd=U._$getChildren(this.__body);this.__export.box=bd[1];this.__tab=U._$tab(bd[0],{clazz:"js-tag"});this.__tab._$setEvent("onchange",this.__onTabChange._$bind(this))};ed.__doSyncTab=function(bl){var by=Z._$indexOf(this.__xlist,function(bY){return bY.url===bl});if(by<0)return;this.__tab._$go(by)};ed.__onTabChange=function(S){bv.dispatcher._$redirect(this.__xlist[S.index].url)};ed.__onShow=function(S){this.__doSyncTab(S.href);hE.__onShow.apply(this,arguments)};ed.__onRefresh=function(S){this.__doSyncTab(S.href)};bv.dispatcher._$loaded("/m/a",W._$$ModuleA)})()</textarea>  </div> <script type="text/javascript">location.config = {"ver":{"index/a.a0.html":"9eb3471f6715d96450fa888a57867da0","index/a.a1.html":"019512279974a83fd326b5bb04ad838c","index/a.a2.html":"b4badb69705d74f4cf9868387c32b7a9","index/a.html":"0726f2da165e18fc73b85e3c6763d869","index/b.b0.html":"cacf2d7bbfe61b29ce6c6ce47c6b7cab","index/b.b1.html":"2f7069f591320b178adc6c47c1c11b60","index/b.b2.html":"aedefd396a75395f7ef8f52b82425386","index/b.html":"1205058f7660af4d787ba4b03fd3daaa","index/c.html":"5fe86e35c6c313f1c6f61be9193442f8","index/d.d0.html":"21cc8818fa088c708c898d2244a0cfe8","index/d.d1.html":"aac08de7712cb12529a7bfb64cb1ca5d","index/d.d2.html":"069b93050f48e45c1a914acb022a6100","index/d.html":"afe07c061fb1a8bf329dd1b4ded09d4a","index/m.html":"1c49bb37ed0a399e9a5b7ea6f9454228","index/ui.html":"880f03f04b2958feab073175f7e99d4a","simple.html":"91eddb963c5e89bce91ebb34d5c36cb3","test/a.html":"7b52dd9dcc114f4d9f9a581a454368a9","test/b.html":"7b52dd9dcc114f4d9f9a581a454368a9"},"root":"./"};</script> <div style="display:none;" id="umi://index/a.a0.html"><meta charset="utf-8"/> <textarea name="ntp" id="a0-ntp-0"> <div class="m-a0"> <input type="button" value="send message to C"/> <p>0000000000000000000000</p> <p>0000000000000000000000</p> <p>0000000000000000000000</p> <p>0000000000000000000000</p> <p>0000000000000000000000</p> <p>0000000000000000000000</p> <p>0000000000000000000000</p> </div> </textarea> <textarea name="css">.m-a0{min-height:500px;_height:500px;background:#f00;}.m-a0 input{padding:5px 10px;margin:10px 0;}</textarea><textarea name="js">(function(){var V=NEJ.P,U=V("nej.e"),bh=V("nej.v"),Z=V("nej.u"),bA=V("dm.ut"),W=NEJ.P("dm.m"),bv=window,gm,jD;W._$$ModuleA0=NEJ.C();gm=W._$$ModuleA0._$extend(bA._$$Module,!0);jD=W._$$ModuleA0._$supro;gm.__doBuild=function(){this.__body=U._$getNodeTemplate("a0-ntp-0");bh._$addEvent(this.__body.getElementsByTagName("input")[0],"click",this.__doSendMessage._$bind(this))};gm.__doSendMessage=function(){bv.dispatcher._$message({to:"/m/c/",from:this.__umi,data:"hello C! my name is a0."})};bv.dispatcher._$loaded("/m/a/a0/",W._$$ModuleA0)})()</textarea></div><div style="display:none;" id="umi://index/a.a1.html"><meta charset="utf-8"/> <textarea name="ntp" id="a1-ntp-0"> <div class="m-a1"> <input type="button" value="send message to C"/> <input type="button" value="send message to A0"/> <p>1111111111111111111111111111</p> <p>1111111111111111111111111111</p> <p>1111111111111111111111111111</p> <p>1111111111111111111111111111</p> <p>1111111111111111111111111111</p> <p>1111111111111111111111111111</p> <p>1111111111111111111111111111</p> </div> </textarea> <textarea name="css">.m-a1{min-height:500px;_height:500px;background:#fdc;}.m-a1 input{padding:5px 10px;margin:10px 0;}</textarea><textarea name="js">(function(){var V=NEJ.P,U=V("nej.e"),bh=V("nej.v"),Z=V("nej.u"),bA=V("dm.ut"),W=NEJ.P("dm.m"),bv=window,gf,jF;W._$$ModuleA1=NEJ.C();gf=W._$$ModuleA1._$extend(bA._$$Module,!0);jF=W._$$ModuleA1._$supro;gf.__doBuild=function(){this.__body=U._$getNodeTemplate("a1-ntp-0");var bd=this.__body.getElementsByTagName("input");bh._$addEvent(bd[0],"click",this.__doSendMessage._$bind(this,"/m/c/"));bh._$addEvent(bd[1],"click",this.__doSendMessage._$bind(this,"/m/a/a0/"))};gf.__doSendMessage=function(cz){bv.dispatcher._$message({to:cz,from:this.__umi,data:"hello C! my name is a1."})};bv.dispatcher._$loaded("/m/a/a1/",W._$$ModuleA1)})()</textarea></div><div style="display:none;" id="umi://index/a.a2.html"><meta charset="utf-8"/> <textarea name="ntp" id="a2-ntp-0"> <div class="m-a2"> <input type="button" value="send message to C"/> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> <p>222222222222222222222222222</p> </div> </textarea> <textarea name="css">.m-a2{min-height:500px;_height:500px;background:#aaa;}.m-a2 input{padding:5px 10px;margin:10px 0;}</textarea><textarea name="js">(function(){var V=NEJ.P,U=V("nej.e"),bh=V("nej.v"),Z=V("nej.u"),bA=V("dm.ut"),W=NEJ.P("dm.m"),bv=window,fL,jH;W._$$ModuleA2=NEJ.C();fL=W._$$ModuleA2._$extend(bA._$$Module,!0);jH=W._$$ModuleA2._$supro;fL.__doBuild=function(){this.__body=U._$getNodeTemplate("a2-ntp-0");bh._$addEvent(this.__body.getElementsByTagName("input")[0],"click",this.__doSendMessage._$bind(this))};fL.__doSendMessage=function(){bv.dispatcher._$message({to:"/m/c/",from:this.__umi,data:"hello C! my name is a2."})};bv.dispatcher._$loaded("/m/a/a2/",W._$$ModuleA2)})()</textarea></div><script src="../r/core.js?93aa0a669eb7a58f71ddd40ff4ddbdf9" type="text/javascript"></script><script type="text/javascript">(function(){var V=NEJ.P,bB=NEJ.O,U=V("nej.e"),bh=V("nej.v"),Z=V("nej.u"),bO=V("nej.j"),bA=V("nej.ut"),be={},hQ=+(new Date)+"-";U._$parseTemplate=function(){var cP=0;var eO=function(){if(cP>0)return;cP=0;bh._$dispatchEvent(document,"templateready");bh._$clearEvent(document,"templateready")};var fB=function(bD,Y){var ch=U._$dataset(bD,"src");if(!ch)return;Y=Y||bB;var bQ=Y.root;if(!bQ){bQ=bD.ownerDocument.location.href}else{bQ=Z._$absolute(bQ)}ch=ch.split(",");Z._$forEach(ch,function(bm,by,bd){bd[by]=Z._$absolute(bm,bQ)});return ch};var kj=function(bD,Y){if(!bD)return;var ch=fB(bD,Y);if(!!ch)bO._$queueStyle(ch,{version:U._$dataset(bD,"version")});U._$addStyle(bD.value)};var kk=function(bm){cP--;U._$addScript(bm);eO()};var kl=function(bD,Y){if(!bD)return;var ch=fB(bD,Y),dC=bD.value;if(!!ch){cP++;var Y={version:U._$dataset(bD,"version"),onloaded:kk._$bind(null,dC)};window.setTimeout(bO._$queueScript._$bind(bO,ch,Y),0);return}U._$addScript(dC)};var km=function(de){cP--;U._$parseTemplate(de);eO()};var kn=function(bD,Y){if(!bD)return;var ch=fB(bD,Y)[0];if(!!ch){cP++;var Y={version:U._$dataset(bD,"version"),onloaded:km};window.setTimeout(bO._$loadHtml._$bind(bO,ch,Y),0)}};var ko=function(bc,ck){cP--;U._$addTextTemplate(bc,ck||"");eO()};var kp=function(bD,Y){if(!bD||!bD.id)return;var bc=bD.id,ch=fB(bD,Y)[0];if(!!ch){cP++;var bp=ch+(ch.indexOf("?")<0?"?":"&")+(U._$dataset(bD,"version")||""),Y={type:"text",method:"GET",onload:ko._$bind(null,bc)};window.setTimeout(bO._$request._$bind(bO,bp,Y),0)}};var kq=function(bg,Y){var bj=bg.name.toLowerCase();switch(bj){case"jst":U._$addHtmlTemplate(bg,!0);return;case"txt":U._$addTextTemplate(bg.id,bg.value||"");return;case"ntp":U._$addNodeTemplate(bg.value||"",bg.id);return;case"js":kl(bg,Y);return;case"css":kj(bg,Y);return;case"html":kn(bg,Y);return;case"res":kp(bg,Y);return}};bA._$$CustomEvent._$allocate({element:document,event:"templateready",oneventadd:eO});return function(T,Y){T=U._$get(T);if(!!T){var bd=T.tagName=="TEXTAREA"?[T]:T.getElementsByTagName("textarea");Z._$forEach(bd,function(bg){kq(bg,Y)});U._$remove(T,!0)}eO();return this}}();U._$addTextTemplate=function(bi,bm){be[bi]=bm||"";return this};U._$getTextTemplate=function(bi){return be[bi]||""};U._$addNodeTemplate=function(T,bi){bi=bi||Z._$randNumberString();T=U._$get(T)||T;U._$addTextTemplate(hQ+bi,T);U._$removeByEC(T);return bi};U._$getNodeTemplate=function(bi){if(!bi)return null;bi=hQ+bi;var bm=U._$getTextTemplate(bi);if(!bm)return null;if(Z._$isString(bm)){bm=U._$html2node(bm);U._$addTextTemplate(bi,bm)}return bm.cloneNode(!0)};U._$getItemTemplate=function(){var dx=function(bm,bi){return bi=="offset"||bi=="limit"};return function(bd,bY,Y){var bw=[];if(!bd||!bd.length||!bY)return bw;Y=Y||bB;var hU=bd.length,fY=parseInt(Y.offset)||0,dE=Math.min(hU,fY+(parseInt(Y.limit)||hU)),eU={total:bd.length,range:[fY,dE]};NEJ.X(eU,Y,dx);for(var i=fY,bJ;i<dE;i++){eU.index=i;eU.data=bd[i];bJ=bY._$allocate(eU);var bc=bJ._$getId();be[bc]=bJ;bJ._$recycle=bJ._$recycle._$aop(function(bc,bJ){delete be[bc];delete bJ._$recycle}._$bind(null,bc,bJ));bw.push(bJ)}return bw}}();U._$getItemById=function(bc){return be[bc]};U._$setup=function(cR,Y){Y=Y||bB;U._$parseTemplate(Y.tid||"template-box");bh._$addEvent(document,"templateready",function(){cR._$allocate()._$dispatchEvent("onshow",Y)})};V("dbg").dumpTC=function(){return be}})();
(function(){var V=NEJ.P,bB=NEJ.O,Z=V("nej.u"),bA=V("nej.ut"),W=V("nej.ut.p"),cx;if(!!W._$$Node)return;W._$$Node=NEJ.C();cx=W._$$Node._$extend(bA._$$Event);cx.__init=function(){this.__supInit();this.__children=[]};cx.__reset=function(Y){this.__supReset(Y);this._$setParent(Y.parent);this.__name=Y.name||"/";this.__data=Y.data||{}};cx.__destroy=function(){var en=function(bg,by,bd){bd.splice(by,1);bg._$recycle()};return function(){this.__supDestroy();delete this.__data;Z._$reverseEach(this.__children,en);this._$setParent(null)}}();cx.__isNode=function(bg){return bg instanceof W._$$Node};cx.__hasChild=function(cv){return Z._$indexOf(this.__children,cv)>=0};cx._$getName=function(){return this.__name};cx._$getData=function(){return this.__data};cx._$getPath=function(){var bx=this._$getParent(),bf=this._$getName();if(!bx)return bf;var dW=bx._$getName();if(dW!="/"&&bf!="/")bf="/"+bf;return bx._$getPath()+bf};cx._$getParent=function(){return this.__parent};cx._$getChildren=function(){return this.__children};cx._$getChildByName=function(bf){var by=Z._$indexOf(this.__children,function(bg){return bf==bg._$getName()});return this.__children[by]||null};cx._$setParent=function(bx){bx=this.__isNode(bx)?bx:null;if(bx==this.__parent)return;!!bx?bx._$appendChild(this):this.__parent._$removeChild(this);this.__parent=bx;return this};cx._$appendChild=function(cv){cv=this.__isNode(cv)?cv:null;if(!cv||this.__hasChild(cv))return;this.__children.push(cv);cv._$setParent(this);return this};cx._$removeChild=function(cv){cv=this.__isNode(cv)?cv:null;var by=Z._$indexOf(this.__children,cv);if(by>=0){this.__children.splice(by,1);cv._$setParent(null)}return cv}})();
(function(){var V=NEJ.P,bG=NEJ.F,Z=V("nej.u"),bA=V("nej.ut"),W=V("nej.ut.p");var eA=function(bQ,bl,gw){var bg=bQ,gw=gw||bG;if(bl!="/"){Z._$forEach(bl.split("/"),function(bf){var bq=gw(bg,bf);if(!bq)return!0;bg=bq})}return bg};W._$getNodeByUMI=function(){var eq=function(bx,bf){var bf=bf||"/",dW=bx._$getName();if(dW=="/"&&bf=="/")return bx;return bx._$getChildByName(bf)};return function(bQ,bl){return eA(bQ,bl,eq)}}();W._$appendNodeByUMI=function(){var kz=function(bx,bf){var dW=bx._$getName();if(!bf&&dW=="/")return bx;var bg=null;if(dW!="/"){bg=bx._$getChildByName("/");if(!bg){bg=W._$$Node._$allocate();bx._$appendChild(bg)}}if(!!bf){bg=bx._$getChildByName(bf);if(!bg){bg=W._$$Node._$allocate({name:bf});bx._$appendChild(bg)}}return bg};return function(bQ,bl){return eA(bQ,bl,kz)}}();W._$getCommonRoot=function(bQ,cu,bM){if(!cu||!bM)return bQ;var cu=cu._$getPath().split("/"),bM=bM._$getPath().split("/"),kB=Z._$forIn(cu,function(bm,by){if(bm!=bM[by])return!0})||1,bl=cu.splice(0,kB).join("/")||"/";return W._$getNodeByUMI(bQ,bl)};W._$breadthFirstSearch=function(bQ,bu){var bw=[bQ],bg=bw.shift(),bu=bu||bG;while(!!bg){bw.push.apply(bw,bg._$getChildren());bu(bg);bg=bw.shift()}return this};W._$isNode=function(bg){return bg instanceof W._$$Node};W._$isModule=function(bH){return bH instanceof bA._$$Module};W._$isUMIPrivate=function(){var bC=/^\/?\?(?=\/|$)/;return function(bl){return bC.test(bl||"")}}();W._$path2umi=function(){var bC=/[\?#]/;return function(bp){var bw=(bp||"").trim().split(bC),kD=bw[0]=="/"&&(bw[1]||"").indexOf("/")==0;return bw[0]+(kD?"?"+bw[1]:"")}}()})();
(function(){var V=NEJ.P,bB=NEJ.O,bv=V("nej.g"),U=V("nej.e"),bO=V("nej.j"),Z=V("nej.u"),bA=V("nej.ut"),W=V("nej.ut.p"),cp;if(!!W._$$GroupManager)return;W._$$GroupManager=NEJ.C();cp=W._$$GroupManager._$extend(bA._$$Event);cp.__reset=function(Y){this.__supReset(Y);this.__root=Y.root;this.__dispatcher=Y.dispatcher;this.__mpool={}};cp.__destroy=function(){this.__supDestroy();delete this.__root;delete this.__mpool};cp.__isStopped=function(bg){if(!W._$isNode(bg))return!1;return!!bg._$getData().stopped||this.__isStopped(bg._$getParent())};cp.__doClearStopped=function(bg){if(!W._$isNode(bg))return;delete bg._$getData().stopped;this.__doClearStopped(bg._$getParent())};cp.__doModuleHide=function(bP,cz){this.__doModuleCheck("onhide",bP,cz)};cp.__doModuleShow=function(bP,cz){this.__doModuleCheck("onshow",bP,cz);this.__doModuleAction(bP)};cp.__doModuleRefresh=function(bg){this.__doModuleCheck("onrefresh",bg);this.__doModuleAction(bg)};cp.__doModuleCheck=function(bj,bP,cz){if(bP==cz||!W._$isNode(bP))return;if(bj=="onhide")this.__doModuleDispatch(bP,bj);this.__doModuleCheck(bj,bP._$getParent(),cz);if(bj!="onhide")this.__doModuleDispatch(bP,bj)};cp.__doModuleAction=function(bg){if(!W._$isNode(bg))return!0;var bk=bg._$getData(),cS=bk.action,bH=bk.module;if(!this.__doModuleAction(bg._$getParent())||!!cS&&Z._$isString(bH))return!1;if(!!bH&&!!bH._$allocate&&!!cS&&cS!="onhide"){if(this.__isStopped(bg))return;var Y={umi:bg._$getPath(),composite:bk.composite,dispatcher:this.__dispatcher};bH=bH._$allocate(Y);if(W._$isModule(bH)){bk.module=bH;this.__doModuleDispatch(bg,"onshow")}else{delete bk.module}}delete bk.action;return!0};cp.__doModuleDispatch=function(){var kG=function(bg){var bH;bg=bg._$getParent();while(!!bg){bH=bg._$getData().module;if(W._$isModule(bH)){return bH._$getExportData()}bg=bg._$getParent()}return null};return function(bg,bf){if(!W._$isNode(bg))return;var bk=bg._$getData(),bH=bk.module,fN=bf!="onhide";if(W._$isModule(bH)){if(fN&&this.__isStopped(bg))return;var S=!this.__source?bk.event:this.__source._$getData().event;if(!!S){S.umi=bg._$getPath();S.data=kG(bg)}var hY=bk.xname||"onhide";if(bf=="onshow"&&hY!="onhide")bf="onrefresh";if(bf=="onrefresh"&&hY=="onhide")bf="onshow";bk.xname=bf;bH._$dispatchEvent(bf,S||{});if(fN&&!!S&&!!S.pos&&S.umi==S.target){U._$scrollTo(S.pos)}if(fN&&!!S){bk.stopped=S.stopped;delete S.stopped}}else if(!!bH){bk.action=bf;if(bf=="onshow"&&Z._$isString(bH)){var T=U._$get("umi://"+bH);if(!!T){U._$parseTemplate(T)}else{var bs=location.config||bB;bO._$loadHtml((bs.root||"")+bH,{version:(bs.ver||bB)[bH],onloaded:U._$parseTemplate})}}}}}();cp._$hasUMI=function(bl){return!!this.__mpool[bl]};cp._$addUMI=function(bl){this.__mpool[bl]=!0;return this};cp._$delUMI=function(bl){delete this.__mpool[bl];return this};cp._$loadedUMI=function(bl){if(this._$hasUMI(bl))this.__doModuleAction(W._$getNodeByUMI(this.__root,bl));return this};cp._$dispatchUMI=function(bl){if(this._$hasUMI(bl)){var bg=W._$getNodeByUMI(this.__root,bl);this.__doClearStopped(bg);this.__doModuleShow(bg)}return this};cp._$hideUMI=function(bl){if(this._$hasUMI(bl)){this.__doModuleHide(W._$getNodeByUMI(this.__root,bl))}return this}})();
(function(){var V=NEJ.P,bB=NEJ.O,bG=NEJ.F,U=V("nej.e"),W=V("nej.ut.p"),dz;if(!!W._$$SingleGroupManager)return;W._$$SingleGroupManager=NEJ.C();dz=W._$$SingleGroupManager._$extend(W._$$GroupManager);dz.__reset=function(Y){this.__supReset(Y);this.__classed=!!Y.classed};dz.__destroy=function(){this.__supDestroy();delete this.__cmroot;delete this.__source};dz._$exitable=function(S){if(!this.__source)return!0;var bH=this.__source._$getData().module;if(W._$isModule(bH))bH._$dispatchEvent("onbeforehide",S);return!S.stopped};dz._$refresh=function(){if(!this.__source)return;window.setTimeout(this._$dispatchUMI._$bind(this,this.__source._$getPath()),0)};dz._$dispatchUMI=function(bl){if(!this._$hasUMI(bl))return this;var bM=W._$getNodeByUMI(this.__root,bl),bk=bM._$getData();if(!bk.module)return this;var cu=this.__source,S=bk.event,fI=bB;this.__source=bM;this.__doClearStopped(bM);if(!!cu){fI=cu._$getData().event;S.referer=fI.href||""}if(cu==bM){this.__doModuleRefresh(this.__source);return this}this.__cmroot=W._$getCommonRoot(this.__root,cu,bM);if(cu!=null){if(cu!=this.__cmroot){if(this.__classed)U._$delClassName(document.body,fI.clazz);this.__doModuleHide(cu,this.__cmroot)}this.__doModuleRefresh(this.__cmroot)}else{this.__doModuleShow(this.__cmroot)}if(bM!=this.__cmroot){if(this.__classed)U._$addClassName(document.body,S.clazz);this.__doModuleShow(bM,this.__cmroot)}return this};dz._$loadedUMI=function(bl){if(this._$hasUMI(bl))this.__doModuleAction(this.__source);return this};dz._$hideUMI=bG})();
(function(){var V=NEJ.P,bh=V("nej.v"),Z=V("nej.u"),el=V("nej.p"),ba=V("nej.h"),bA=V("nej.ut"),cI=/^[#?]+/,ey=/#(.*?)$/,dk=window,gB=!history.pushState||el._$IS.android||!history.auto;var fh=function(bp,gu){dk.history[!gu?"pushState":"replaceState"](null,document.title,bp)};var fk=function(){return location.parse(dk.location.href)};fh=fh._$aop(function(S){if(!gB)return;var bb=S.args;S.stopped=!0;bp=bb[0].replace(cI,"");!bb[1]?dk.location.hash=bp:dk.location.replace("#"+bp)});fk=fk._$aop(function(S){if(!gB)return;S.stopped=!0;var ds=ey.test(dk.location.href)?RegExp.$1:"";S.value=location.parse(ds.replace(cI,""))});location.redirect=function(bp,gu){fh(bp,gu);return this};location.active=function(){var dG,bp,bZ,gg,hZ;var fM=function(cQ){if(!!gg){gg=!1;return}var S={oldValue:bZ,newValue:fk()};if(!!location.ignored){location.ignored=!1}else{bh._$dispatchEvent(location,"beforeurlchange",S);if(S.stopped){if(!!bZ){gg=!0;fh(bZ.href,!0)}return}}bp=dk.location.href;bZ=S.newValue;bh._$dispatchEvent(location,"urlchange",bZ);ba.__pushHistory(bZ.href)};var ib=function(){if(bp!=dk.location.href)fM();dG=requestAnimationFrame(ib)};return function(dn){if(!!hZ)return this;hZ=!0;dk=dn||window;if(gB&&"onhashchange"in window&&el._$NOT_PATCH.trident2){bh._$addEvent(dk,"hashchange",fM);fM()}else if(!dG){dG=requestAnimationFrame(ib)}return this}}();location.parse=function(){var cg=/^https?:\/\/.*?\//i,cI=/[?#]/;return function(bp){var bq={href:bp};bp=(bp||"").replace(cg,"/").split(cI);var cP=1;if(bp[0]=="/"&&(bp[1]||"").indexOf("/")==0)cP=2;bq.path=bp.splice(0,cP).join("?");bq.query=Z._$query2object(bp.join("&"));return bq}}();location.same=function(bp){return fk().href==bp};bA._$$CustomEvent._$allocate({element:location,event:["beforeurlchange","urlchange"]})})();
(function(){var V=NEJ.P,bB=NEJ.O,bG=NEJ.F,U=V("nej.e"),bh=V("nej.v"),Z=V("nej.u"),W=V("nej.ut"),cH=V("nej.ut.p"),bn;if(!!W._$$Dispatcher)return;W._$$Dispatcher=NEJ.C();bn=W._$$Dispatcher._$extend(W._$$Event);bn.__init=function(){this.__supInit();var bS=+(new Date);this.__pbseed="pb-"+bS;this.__pvseed="pv-"+bS};bn.__reset=function(Y){this.__dtmp={};this.__rest=!!Y.rest;this.__root=cH._$$Node._$allocate();this.__config={m:{},mg:{},r:[],rr:{},al:{},am:{}};this.__groups={};this.__doBuildGroup(this.__pbseed);this.__groups[this.__pvseed]=cH._$$GroupManager._$allocate({root:this.__root,dispatcher:this});this.__doInitDomEvent([[location,"urlchange",this.__onURLChange._$bind(this)]]);this.__supReset(Y);this._$rule(Y.rules);this._$regist(Y.modules)};bn.__destroy=function(){var en=function(cK,bi,bo){delete bo[bi];cK._$recycle()};return function(){delete this.__config;this.__root=this.__root._$recycle();Z._$forIn(this.__groups,en);this.__supDestroy()}}();bn.__setModuleConf=function(bl,bi,bm){var dD=this.__config.m[bl];if(!dD){dD={};this.__config.m[bl]=dD}dD[bi]=bm};bn.__getModuleConf=function(bl,bi){var dD=this.__config.m[bl];return!dD?"":dD[bi]};bn.__doBuildGroup=function(bX){if(!bX)return;var cK=this.__groups[bX];if(!cK){cK=cH._$$SingleGroupManager._$allocate({root:this.__root,dispatcher:this,classed:bX==this.__pbseed});this.__groups[bX]=cK}return cK};bn.__doAddUMI2Group=function(bl,bX){var cK=this.__doBuildGroup(bX);if(!cK){bX=cH._$isUMIPrivate(bl)?this.__pvseed:this.__pbseed;cK=this.__groups[bX]}cK._$addUMI(bl);this.__config.mg[bl]=bX};bn.__doRewriteUMI=function(){var bC=/\$\d/;return function(bl,cQ){var bq;Z._$forIn(this.__config.r,function(bs){Z._$forIn(bs,function(bm,bi){if(!!bm.test&&(bm.test(bl)||bm.test(cQ))){bq=bC.test(bi)?bl.replace(bm,bi):bi;return!0}if(bm===bl||bm===cQ){bq=bi;return!0}});return!!bq});return bq||bl}}();bn.__onURLChange=function(){var dR=/(?:^\/+)|(?:\/+$)/gi,cg=/#(\$.*?)$/;var kZ=function(bl,bg){var ee=bg._$getPath(),bl=bl.replace(ee,"").replace(dR,"");return bl.split("/")};var ii=function(bl,bo){var bm,bw=bl.split("/");while(bw.length>0){if(!bw[bw.length-1]){bw.pop()}else{bw[bw.length-1]=""}bm=bo[bw.join("/")];if(!!bm)return bm}return""};return function(bZ){if(bZ.path.indexOf("$")==0)return;var lb=this.__dtmp[bZ.path];delete this.__dtmp[bZ.path];this._$dispatchEvent("onbeforechange",bZ);var bl=this.__doRewriteUMI(bZ.path,bZ.href),bX=this.__config.mg[bl];if(!bX&&this.__rest)bX=ii(bl,this.__config.mg);if(!bX&&!cH._$isUMIPrivate(bl)){bl=this.__config.rr["404"];bX=this.__config.mg[bl]}if(!bX&&this.__rest)bX=ii(bl,this.__config.mg);if(!bX)return;var bg=cH._$getNodeByUMI(this.__root,bl),ij=null;if(this.__rest)ij=kZ(bl,bg);var cu=bl;bl=bg._$getPath();bg._$getData().event={target:bl,source:cu,href:bZ.href,param:bZ.query,input:lb,prest:ij,clazz:this.__getModuleConf(bl,"clazz"),pos:cg.test(bZ.href)?RegExp.$1:""};var fz=this.__getModuleConf(cu,"title");if(!!fz)document.title=fz;this.__groups[bX]._$dispatchUMI(bl)}}();bn.__onClickDelegate=function(){var il=function(bp,cQ){if(!bp)return;var dV=location.parse(bp);this._$dispatchEvent("onbeforechange",dV);var bl=this.__doRewriteUMI(dV.path,cQ||dV.href);return this.__groups[this.__pbseed]._$hasUMI(bl)};var eA=function(bg){var bl=U._$dataset(bg,"href");if(!!bl)return bl;var cQ=U._$attr(bg,"href");if(!!cQ&&!U._$dataset(bg,"notUmi")){var bw=cQ.split("#");bw.shift();var bl=bw.join("#");if(il.call(this,bl,cQ)){return bl}if(il.call(this,cQ)){var dV=location.parse(cQ);return dV.path+"?"+Z._$object2query(dV.query)}}};var lg=function(bg){return!!eA.call(this,bg)};return function(S){var T=bh._$getElement(S,lg._$bind(this));if(!!T){bh._$stopDefault(S);this._$redirect(eA.call(this,T))}}}();bn.__onActionDelegate=function(S){var ek=this.__config.am,bW=ek[S.type];if(!bW)return;var T=bh._$getElement(S,"d:resAction");if(!T)return;var cS=U._$dataset(T,"resAction"),bu=bW[cS];if(!bu)return;var Y={action:cS,target:T,id:U._$dataset(T,"resId"),type:U._$dataset(T,"resType"),extra:U._$dataset(T,"resExtra")};this._$dispatchEvent("onbeforeaction",{event:S,target:T,result:Y});bu.call(this,Y)};bn._$rule=function(){var li=["404"];var lj=function(bs,bi){this._$rule(bi,bs)};var lk=function(fz,bl){this.__setModuleConf(bl,"title",fz)};var ll=function(bl,lm){this.__config.al[lm]=bl};var gF=function(bs){if(!bs)return;this.__config.r.push(bs);Z._$forEach(li,function(bi){if(!bs[bi])return;this.__config.rr[bi]=bs[bi];delete bs[bi]},this)};var lo=function(cS,bf){var ek=this.__config.am;var S="click",bu=cS,bf=(bf||"").toLowerCase();if(Z._$isObject(cS)){S=cS.event||S;bu=cS.value}if(Z._$isString(bu)){bu=function(bl,Y){this._$redirect(bl,{force:!0,input:Y})}._$bind(this,bu)}else if(Z._$isFunction(bu)){bu=bu._$aop(null,function(S){var bq=S.value;if(Z._$isString(bq)){this._$redirect(bq,{force:!0,input:S.args[0]})}}._$bind(this))}if(Z._$isFunction(bu)){if(!ek[S]){this.__doInitDomEvent([[document,S,this.__onActionDelegate._$bind(this)]]);ek[S]={}}ek[S][bf]=bu}};var dm={title:function(bs){Z._$forIn(bs,lk,this)},rewrite:function(bs){if(!Z._$isArray(bs)){gF.call(this,bs)}else{Z._$forEach(bs,gF,this)}},alias:function(bs){Z._$forIn(bs,ll,this)},action:function(bs){Z._$forIn(bs,lo,this)}};return function(bi,bs){if(Z._$isArray(bi)){bs=bi;bi="rewrite"}else if(!Z._$isString(bi)){Z._$forIn(bi,lj,this);return this}(dm[bi]||bG).call(this,bs);return this}}();bn._$regist=function(){var jj=function(bs,bl){this._$regist(bl,bs)};var ha=function(bH){return!!bH&&!!bH._$extend};return function(bl,bs){if(!Z._$isString(bl)){Z._$forIn(bl,jj,this);return this}var bk=cH._$appendNodeByUMI(this.__root,bl)._$getData(),bH=bk.module;if(cH._$isModule(bH)||ha(bH))return this;var bX=this.__config.mg[bl],bH;if(Z._$isString(bs)||ha(bs)){bH=bs}else{bs=bs||bB;bX=bs.gid;bH=bs.module;if(!!bs.title)this.__setModuleConf(bl,"title",bs.title);if(!!bs.clazz)this.__setModuleConf(bl,"clazz",bs.clazz);if(!!bs.composite)bk.composite=bs.composite}this.__doAddUMI2Group(bl,bX);bk.module=bH;return this}}();bn._$message=function(){var fW=function(bg,ce){var bH=bg._$getData().module;if(cH._$isModule(bH))bH._$dispatchEvent("onmessage",ce)};var dm=[fW,function(bM,ce){var bP=ce.from;while(!!bM){if(bM._$getPath()!=bP)fW(bM,ce);bM=bM._$getParent()}},function(bM,ce){var bP=ce.from;cH._$breadthFirstSearch(bM,function(bg){if(bg._$getPath()!=bP)fW(bg,ce)})}];return function(ce){var S=NEJ.X({},ce),bM=cH._$getNodeByUMI(this.__root,S.to);S.path=bM._$getPath();(dm[S.mode]||dm[0]).call(this,bM,S)}}();bn._$publish=function(bj,ce){var ce=NEJ.X({},ce);ce.type=bj||"";this._$dispatchEvent((ce.from||"")+":"+ce.type,ce)};bn._$subscribe=function(bl,bj,cl){bl=this.__config.al[bl]||bl;this._$pushEvent((bl||"")+":"+(bj||""),cl)};bn._$unsubscribe=function(bl,bj,cl){bl=this.__config.al[bl]||bl;this._$delEvent((bl||"")+":"+(bj||""),cl)};bn._$apply=function(bp){return this._$redirect(bp)};bn._$hide=function(bl){var bX=this.__config.mg[bl];if(bX==this.__pvseed){this.__groups[bX]._$hideUMI(bl)}return this};bn._$redirect=function(bp,Y){Y=Y||bB;var bl=cH._$path2umi(bp),bZ=location.parse(bp);this.__dtmp[bZ.path]=Y.input;if(cH._$isUMIPrivate(bl)){this.__onURLChange(bZ)}else{var cK=this.__groups[this.__pbseed],S={target:bZ,umi:bl};if(!!cK._$exitable(S)){if(location.same(bp)&&!!Y.force){this.__onURLChange(bZ)}else{location.ignored=!!Y.ignored;location.redirect(bp,!!Y.replace)}}}return this};bn._$refresh=function(bp){if(!!bp){this._$redirect(bp,{replace:!0,force:!0})}else{this.__groups[this.__pbseed]._$refresh()}};bn._$delegate=function(){this.__doInitDomEvent([[document,"click",this.__onClickDelegate._$bind(this)]]);return this};bn._$active=function(){location.active();return this};bn._$loaded=function(bl,bH){bl=this.__config.al[bl]||bl;if(!Z._$isArray(bl)){this._$regist(bl,bH);this.__groups[this.__config.mg[bl]]._$loadedUMI(bl)}else{Z._$forEach(bl,function(bi){this._$loaded(bi,bH)},this)}return this};U._$startup=function(Y){window.dispatcher=W._$$Dispatcher._$getInstance(Y);U._$parseTemplate((Y||bB).tid||"template-box",location.config);bh._$addEvent(document,"templateready",function(){window.setTimeout(dispatcher._$active._$bind(dispatcher),0)});return window.dispatcher}})();
(function(){var V=NEJ.P,U=V("nej.e"),bA=V("nej.ut");window.dispatcher=bA._$$Dispatcher._$getInstance({rules:{rewrite:{404:"/m/a/a0/","/m/a/a0/":"/"},title:{"/m/b/":"Module B","/m/c/":"Module C"}},modules:{"/":"index/ui.html","/m":"index/m.html","/m/a":"index/a.html","/m/b/":"index/b.html","/m/c/":"index/c.html","/m/d/":"index/d.html","/m/a/a0/":{module:"index/a.a0.html",title:"Module A-A0",clazz:"g-aa0"},"/m/a/a1/":{module:"index/a.a1.html",title:"Module A-A1",clazz:"g-aa1"},"/m/a/a2/":{module:"index/a.a2.html",title:"Module A-A2",clazz:"g-aa2"},"/?/b/b0/":"index/b.b0.html","/?/b/b1/":"index/b.b1.html","/?/b/b2/":"index/b.b2.html","/?/d/d0/":{module:"index/d.d0.html",title:"Module D-D0",gid:"d"},"/?/d/d1/":{module:"index/d.d1.html",title:"Module D-D1",gid:"d"},"/?/d/d2/":{module:"index/d.d2.html",title:"Module D-D2",gid:"d"}}});U._$parseTemplate("template-box");dispatcher._$active()})()</script> </body> </html>